export const PROCESSOR = `(()=>{var i=class{constructor(){this.value=0,this.a=.1,this.d=.1,this.s=.1,this.r=0,this.stage=3}start(){this.stage=0}release(){this.stage=2}process(t){switch(this.stage){case 0:this.value+=(1.1-this.value)*this.a*t,this.value>=1&&(this.value=1,this.stage=1);break;case 1:this.value+=(this.s-this.value)*this.d*t;break;case 2:this.value+=(-.1-this.value)*this.r*t,this.value<=0&&(this.value=0,this.stage=3);break}return this.value}};var o=class{#t;#e;constructor(){this.#t=0,this.#e=0}process(t,s){let r=s*t;for(this.#t+=r;this.#t>1;)this.#t-=1;switch(this.#e){case 0:return Math.sin(this.#t*2*Math.PI)}}};var p=e=>440*Math.pow(2,(e-69)/12),n=class{#t;#e;#s;constructor(){this.#t=new o,this.#s=new i,this.note=60}set note(t){this.#e=t,this.targetFrequency=p(t)}get note(){return this.#e}start(){this.#s.start()}release(){this.#s.release()}process(t){let s=this.#s.process(t);return this.#t.process(t,this.targetFrequency)*s}};var u=class extends AudioWorkletProcessor{constructor(){super();this.voice=new n,this.dt=1/sampleRate,this.port.postMessage("SynthletProcessor 05 ready: "+this.dt),this.started=!1}process(s,r,c){let a=c.trigger[0];a!==0&&!this.started?(this.started=!0,this.port.postMessage("start: "+a),this.voice.start()):a===0&&this.started&&(this.port.postMessage("release: "+a),this.started=!1,this.voice.release());let m=c.note[0];this.voice.note=m;let l=r[0][0];for(let h=0;h<l.length;h++)l[h]=this.voice.process(this.dt);return!0}static get parameterDescriptors(){return[{name:"trigger",defaultValue:0,minValue:0,maxValue:1,automationRate:"k-rate"},{name:"note",defaultValue:60,minValue:0,maxValue:127,automationRate:"k-rate"}]}};registerProcessor("SynthletProcessor",u);})();`;
