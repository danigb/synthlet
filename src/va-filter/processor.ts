export const PROCESSOR = `(()=>{function V(a){return Object.keys(a).map(e=>{let{min:t,max:u,defaultValue:r}=a[e];return{name:e,minValue:t,maxValue:u,defaultValue:r,automationRate:"k-rate"}})}var L=Math.PI,b=2*L,O=L*L,N=4/L,S=-4/O;var d=5/12,g=Math.pow(10,-1/d),W=1/(1-g),D=1/(1+d*Math.log10(1+g)),I=1/(1+-Math.pow(10,-1/d)),v=d*Math.log10(1+g),T=1/(-d*Math.log10(g)+v);function m(a){let e=1/(2*a),t=0,u=0,r={a:0,b:1},o={LP:0,HP:0,AP:0,ALP:0};function c(s){if(s===t)return;t=s;let n=Math.tan(b*t*e);r.a=n/(1+n)}function i(s){let n=(s-u)*r.a;return o.LP=(s-u)*r.a+u,o.HP=s-o.LP,o.AP=o.LP-o.HP,o.ALP=o.LP+r.a*o.HP,u=n+o.LP,o}function P(){return u*r.b}return{coeff:r,process:i,update:c,fb:P}}function B(a){let e=1/(2*a),t=0,u=0,r={K:1,a:0,b:0,g:0},o=m(a),c=m(a),i=m(a),P=m(a),s=m(a),n=m(a),f={LP:0,HP:0,ALP:0};function A(l,p){l==t&&p==u||(t=l,r.K=u=p,r.g=Math.tan(b*t*e),r.a=r.g/(1+r.g),r.b=1/(1-r.K*r.a+r.K*r.a*r.a),o.coeff.a=c.coeff.a=i.coeff.a=r.a,P.coeff.a=s.coeff.a=n.coeff.a=r.a,c.coeff.b=r.K*(1-r.a)/(1+r.g),i.coeff.b=-1/(1+r.g),s.coeff.b=-r.a/(1+r.g),n.coeff.b=1/(1+r.g))}function h(l){let p=o.process(l),M=c.fb()+i.fb(),_=r.a*(p.ALP+M);if(p=c.process(_),f.LP=p.LP*r.K,f.ALP=p.ALP*r.K,i.process(f.LP),p=P.process(l),M=s.fb()+n.fb(),_=r.a*(p.HP+M),f.HP=_*r.K,p=s.process(f.HP),n.process(p.HP),r.K>0){let y=1/r.K;f.LP*=y,f.HP*=y,f.ALP*=y}return f}return{update:A,process:h}}function C(a){let e=0,t=0,u=1/(2*a),r={a:0,b:1,s:1,r:1},o={LP:0,HP:0,BP:0,BS:0,ALP:0},c=0,i=0;function P(n,f){if(n===e&&f===t)return;e=n,t=f,r.a=Math.tan(b*e*u);let A=1/(2*t);r.b=1/(1+2*A*r.a+r.a*r.a),t>24.9?r.r=r.a:r.r=2*A+r.a;let h=a/2/e;r.s=1/(r.a*h*h)}function s(n){return o.HP=r.b*(n-r.r*c-i),o.BP=r.a*o.HP+c,o.LP=r.a*o.BP+i,o.BS=o.HP+o.LP,o.ALP=o.LP+r.s*c,c=r.a*o.HP+o.BP,i=r.a*o.BP+o.LP,o}return{update:P,process:s,coeff:r}}var x={type:{min:0,max:14,defaultValue:1},frequency:{min:0,max:1e4,defaultValue:1e3},resonance:{min:0,max:1,defaultValue:.5}},k=class{constructor(e){this.sampleRate=e;this.filterType=0,this.va1=m(e),this.va2=C(e),this.korg35=B(e),this.process=t=>t,this.processors=[t=>t,t=>this.va1.process(t).LP,t=>this.va1.process(t).HP,t=>this.va1.process(t).ALP,t=>this.va2.process(t).LP,t=>this.va2.process(t).HP,t=>this.va2.process(t).BP,t=>this.va2.process(t).BS,t=>this.va2.process(t).ALP,t=>this.korg35.process(t).LP,t=>this.korg35.process(t).HP],this.setParams(1,x.frequency.defaultValue,x.resonance.defaultValue)}setParams(e,t,u){this.filterType!==e&&(this.process=this.processors[e]??this.processors[0]),this.#r(t,u)}#r(e,t){this.va1.update(e),this.va2.update(e,t),this.korg35.update(e,t)}};var K=class extends AudioWorkletProcessor{constructor(){super();this.processor=new k(sampleRate)}process(t,u,r){let o=r.type[0],c=r.frequency[0],i=r.resonance[0];this.processor.setParams(o,c,i);let P=t[0][0],s=u[0][0];if(!P||!s)return!0;for(let n=0;n<s.length;n++)s[n]=this.processor.process(P[n]);return!0}static get parameterDescriptors(){return K.PARAMS}},H=K;H.PARAMS=V(x);registerProcessor("VaFilterWorklet",H);})();`;
