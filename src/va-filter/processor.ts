export const PROCESSOR = `(()=>{function y(s){return Object.keys(s).map(e=>{let{min:t,max:c,def:r}=s[e];return{name:e,minValue:t,maxValue:c,defaultValue:r,automationRate:"k-rate"}})}var L=Math.PI,b=2*L,B=L*L;var V=4/L,W=-4/B;var l=5/12,g=Math.pow(10,-1/l),w=1/(1-g),D=1/(1+l*Math.log10(1+g)),I=1/(1+-Math.pow(10,-1/l)),v=l*Math.log10(1+g),T=1/(-l*Math.log10(g)+v);function m(s){let e=1/(2*s),t=0,c=0,r={a:0,b:1},o={LP:0,HP:0,AP:0,ALP:0};function u(a){if(a===t)return;t=a;let n=Math.tan(b*t*e);r.a=n/(1+n)}function i(a){let n=(a-c)*r.a;return o.LP=(a-c)*r.a+c,o.HP=a-o.LP,o.AP=o.LP-o.HP,o.ALP=o.LP+r.a*o.HP,c=n+o.LP,o}function P(){return c*r.b}return{coeff:r,process:i,update:u,fb:P}}function C(s){let e=1/(2*s),t=0,c=0,r={K:1,a:0,b:0,g:0},o=m(s),u=m(s),i=m(s),P=m(s),a=m(s),n=m(s),f={LP:0,HP:0,ALP:0};function h(d,p){d==t&&p==c||(t=d,r.K=c=p,r.g=Math.tan(b*t*e),r.a=r.g/(1+r.g),r.b=1/(1-r.K*r.a+r.K*r.a*r.a),o.coeff.a=u.coeff.a=i.coeff.a=r.a,P.coeff.a=a.coeff.a=n.coeff.a=r.a,u.coeff.b=r.K*(1-r.a)/(1+r.g),i.coeff.b=-1/(1+r.g),a.coeff.b=-r.a/(1+r.g),n.coeff.b=1/(1+r.g))}function A(d){let p=o.process(d),H=u.fb()+i.fb(),M=r.a*(p.ALP+H);if(p=u.process(M),f.LP=p.LP*r.K,f.ALP=p.ALP*r.K,i.process(f.LP),p=P.process(d),H=a.fb()+n.fb(),M=r.a*(p.HP+H),f.HP=M*r.K,p=a.process(f.HP),n.process(p.HP),r.K>0){let _=1/r.K;f.LP*=_,f.HP*=_,f.ALP*=_}return f}return{update:h,process:A}}function K(s){let e=0,t=0,c=1/(2*s),r={a:0,b:1,s:1,r:1},o={LP:0,HP:0,BP:0,BS:0,ALP:0},u=0,i=0;function P(n,f){if(n===e&&f===t)return;e=n,t=f,r.a=Math.tan(b*e*c);let h=1/(2*t);r.b=1/(1+2*h*r.a+r.a*r.a),t>24.9?r.r=r.a:r.r=2*h+r.a;let A=s/2/e;r.s=1/(r.a*A*A)}function a(n){return o.HP=r.b*(n-r.r*u-i),o.BP=r.a*o.HP+u,o.LP=r.a*o.BP+i,o.BS=o.HP+o.LP,o.ALP=o.LP+r.s*u,u=r.a*o.HP+o.BP,i=r.a*o.BP+o.LP,o}return{update:P,process:a,coeff:r}}var x={type:{min:0,max:14,def:1},frequency:{min:0,max:1e4,def:1e3},resonance:{min:0,max:1,def:.5}},k=class{constructor(e){this.sampleRate=e;this.filterType=0,this.va1=m(e),this.va2=K(e),this.korg35=C(e),this.process=t=>t,this.processors=[t=>t,t=>this.va1.process(t).LP,t=>this.va1.process(t).HP,t=>this.va1.process(t).ALP,t=>this.va2.process(t).LP,t=>this.va2.process(t).HP,t=>this.va2.process(t).BP,t=>this.va2.process(t).BS,t=>this.va2.process(t).ALP,t=>this.korg35.process(t).LP,t=>this.korg35.process(t).HP],this.setParams(1,x.frequency.def,x.resonance.def)}setParams(e,t,c){this.filterType!==e&&(this.process=this.processors[e]??this.processors[0]),this.#r(t,c)}#r(e,t){this.va1.update(e),this.va2.update(e,t),this.korg35.update(e,t)}};var N=y(x),O=class extends AudioWorkletProcessor{constructor(){super();this.processor=new k(sampleRate)}process(t,c,r){let o=r.type[0],u=r.frequency[0],i=r.resonance[0];this.processor.setParams(o,u,i);let P=t[0][0],a=c[0][0];if(!P||!a)return!0;for(let n=0;n<a.length;n++)a[n]=this.processor.process(P[n]);return!0}static get parameterDescriptors(){return N}};registerProcessor("VaFilterWorklet",O);})();`;
