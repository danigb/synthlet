export const PROCESSOR = `(()=>{function y(s){return Object.keys(s).map(e=>{let{min:o,max:c,def:t}=s[e];return{name:e,minValue:o,maxValue:c,defaultValue:t,automationRate:"k-rate"}})}var L=Math.PI,b=2*L,B=L*L;var S=4/L,V=-4/B;var l=5/12,g=Math.pow(10,-1/l),w=1/(1-g),D=1/(1+l*Math.log10(1+g)),I=1/(1+-Math.pow(10,-1/l)),v=l*Math.log10(1+g),T=1/(-l*Math.log10(g)+v);function m(s){let e=1/(2*s),o=0,c=0,t={a:0,b:1},r={LP:0,HP:0,AP:0,ALP:0};function i(a){if(a===o)return;o=a;let n=Math.tan(b*o*e);t.a=n/(1+n)}function u(a){let n=(a-c)*t.a;return r.LP=(a-c)*t.a+c,r.HP=a-r.LP,r.AP=r.LP-r.HP,r.ALP=r.LP+t.a*r.HP,c=n+r.LP,r}function P(){return c*t.b}return{coeff:t,process:u,update:i,fb:P}}function C(s){let e=1/(2*s),o=0,c=0,t={K:1,a:0,b:0,g:0},r=m(s),i=m(s),u=m(s),P=m(s),a=m(s),n=m(s),f={LP:0,HP:0,ALP:0};function h(d,p){d==o&&p==c||(o=d,t.K=c=p,t.g=Math.tan(b*o*e),t.a=t.g/(1+t.g),t.b=1/(1-t.K*t.a+t.K*t.a*t.a),r.coeff.a=i.coeff.a=u.coeff.a=t.a,P.coeff.a=a.coeff.a=n.coeff.a=t.a,i.coeff.b=t.K*(1-t.a)/(1+t.g),u.coeff.b=-1/(1+t.g),a.coeff.b=-t.a/(1+t.g),n.coeff.b=1/(1+t.g))}function A(d){let p=r.process(d),M=i.fb()+u.fb(),H=t.a*(p.ALP+M);if(p=i.process(H),f.LP=p.LP*t.K,f.ALP=p.ALP*t.K,u.process(f.LP),p=P.process(d),M=a.fb()+n.fb(),H=t.a*(p.HP+M),f.HP=H*t.K,p=a.process(f.HP),n.process(p.HP),t.K>0){let _=1/t.K;f.LP*=_,f.HP*=_,f.ALP*=_}return f}return{update:h,process:A}}function K(s){let e=0,o=0,c=1/(2*s),t={a:0,b:1,s:1,r:1},r={LP:0,HP:0,BP:0,BS:0,ALP:0},i=0,u=0;function P(n,f){if(n===e&&f===o)return;e=n,o=f,t.a=Math.tan(b*e*c);let h=1/(2*o);t.b=1/(1+2*h*t.a+t.a*t.a),o>24.9?t.r=t.a:t.r=2*h+t.a;let A=s/2/e;t.s=1/(t.a*A*A)}function a(n){return r.HP=t.b*(n-t.r*i-u),r.BP=t.a*r.HP+i,r.LP=t.a*r.BP+u,r.BS=r.HP+r.LP,r.ALP=r.LP+t.s*i,i=t.a*r.HP+r.BP,u=t.a*r.BP+r.LP,r}return{update:P,process:a,coeff:t}}var x={type:{min:0,max:14,def:1},frequency:{min:0,max:1e4,def:1e3},resonance:{min:0,max:1,def:.5}},k=class{constructor(e){this.sampleRate=e;this.filterType=0,this.va1=m(e),this.va2=K(e),this.korg35=C(e),this.process=o=>o,this.processors=[o=>o,o=>this.va1.process(o).LP,o=>this.va1.process(o).HP,o=>this.va1.process(o).ALP,o=>this.va2.process(o).LP,o=>this.va2.process(o).HP,o=>this.va2.process(o).BP,o=>this.va2.process(o).BS,o=>this.va2.process(o).ALP,o=>this.korg35.process(o).LP,o=>this.korg35.process(o).HP],this.setParams(1,x.frequency.def,x.resonance.def)}setParams(e,o,c){this.filterType!==e&&(this.process=this.processors[e]??this.processors[0]),this.#t(o,c)}#t(e,o){this.va1.update(e),this.va2.update(e,o),this.korg35.update(e,o)}};var W=y(x),O=class extends AudioWorkletProcessor{constructor(){super();this.processor=new k(sampleRate)}process(o,c,t){let r=t.type[0],i=t.frequency[0],u=t.resonance[0];this.processor.setParams(r,i,u);let P=o[0][0],a=c[0][0];if(!P||!a)return!0;for(let n=0;n<a.length;n++)a[n]=this.processor.process(P[n]);return!0}static get parameterDescriptors(){return W}};registerProcessor("VaFilterWorklet",O);})();`;
