export const PROCESSOR = `(()=>{function C(s){return Object.keys(s).map(e=>{let{min:o,max:c,def:r}=s[e];return{name:e,minValue:o,maxValue:c,defaultValue:r,automationRate:"k-rate"}})}var L=Math.PI,b=2*L,v=L*L;var V=4/L,W=-4/v;var l=5/12,g=Math.pow(10,-1/l),w=1/(1-g),D=1/(1+l*Math.log10(1+g)),I=1/(1+-Math.pow(10,-1/l)),y=l*Math.log10(1+g),T=1/(-l*Math.log10(g)+y);function m(s){let e=1/(2*s),o=0,c=0,r={a:0,b:1},t={LP:0,HP:0,AP:0,ALP:0};function u(a){if(a===o)return;o=a;let n=Math.tan(b*o*e);r.a=n/(1+n)}function i(a){let n=(a-c)*r.a;return t.LP=(a-c)*r.a+c,t.HP=a-t.LP,t.AP=t.LP-t.HP,t.ALP=t.LP+r.a*t.HP,c=n+t.LP,t}function P(){return c*r.b}return{coeff:r,process:i,update:u,fb:P}}function K(s){let e=1/(2*s),o=0,c=0,r={K:1,a:0,b:0,g:0},t=m(s),u=m(s),i=m(s),P=m(s),a=m(s),n=m(s),f={LP:0,HP:0,ALP:0};function h(d,p){d==o&&p==c||(o=d,r.K=c=p,r.g=Math.tan(b*o*e),r.a=r.g/(1+r.g),r.b=1/(1-r.K*r.a+r.K*r.a*r.a),t.coeff.a=u.coeff.a=i.coeff.a=r.a,P.coeff.a=a.coeff.a=n.coeff.a=r.a,u.coeff.b=r.K*(1-r.a)/(1+r.g),i.coeff.b=-1/(1+r.g),a.coeff.b=-r.a/(1+r.g),n.coeff.b=1/(1+r.g))}function A(d){let p=t.process(d),H=u.fb()+i.fb(),M=r.a*(p.ALP+H);if(p=u.process(M),f.LP=p.LP*r.K,f.ALP=p.ALP*r.K,i.process(f.LP),p=P.process(d),H=a.fb()+n.fb(),M=r.a*(p.HP+H),f.HP=M*r.K,p=a.process(f.HP),n.process(p.HP),r.K>0){let _=1/r.K;f.LP*=_,f.HP*=_,f.ALP*=_}return f}return{update:h,process:A}}function B(s){let e=0,o=0,c=1/(2*s),r={a:0,b:1,s:1,r:1},t={LP:0,HP:0,BP:0,BS:0,ALP:0},u=0,i=0;function P(n,f){if(n===e&&f===o)return;e=n,o=f,r.a=Math.tan(b*e*c);let h=1/(2*o);r.b=1/(1+2*h*r.a+r.a*r.a),o>24.9?r.r=r.a:r.r=2*h+r.a;let A=s/2/e;r.s=1/(r.a*A*A)}function a(n){return t.HP=r.b*(n-r.r*u-i),t.BP=r.a*t.HP+u,t.LP=r.a*t.BP+i,t.BS=t.HP+t.LP,t.ALP=t.LP+r.s*u,u=r.a*t.HP+t.BP,i=r.a*t.BP+t.LP,t}return{update:P,process:a,coeff:r}}var x={type:{min:0,max:14,def:1},frequency:{min:0,max:1e4,def:1e3},resonance:{min:0,max:1,def:.5}},k=class{constructor(e){this.sampleRate=e;this.filterType=0,this.va1=m(e),this.va2=B(e),this.korg35=K(e),this.process=o=>o,this.processors=[o=>o,o=>this.va1.process(o).LP,o=>this.va1.process(o).HP,o=>this.va1.process(o).ALP,o=>this.va2.process(o).LP,o=>this.va2.process(o).HP,o=>this.va2.process(o).BP,o=>this.va2.process(o).BS,o=>this.va2.process(o).ALP,o=>this.korg35.process(o).LP,o=>this.korg35.process(o).HP],this.setParams(1,x.frequency.def,x.resonance.def)}setParams(e,o,c){this.filterType!==e&&(this.process=this.processors[e]??this.processors[0]),this.#r(o,c)}#r(e,o){this.va1.update(e),this.va2.update(e,o),this.korg35.update(e,o)}};var N=C(x),O=class extends AudioWorkletProcessor{constructor(){super();this.processor=new k(sampleRate)}process(o,c,r){let t=r.type[0],u=r.frequency[0],i=r.resonance[0];this.processor.setParams(t,u,i);let P=o[0][0],a=c[0][0];if(!P||!a)return!0;for(let n=0;n<a.length;n++)a[n]=this.processor.process(P[n]);return!0}static get parameterDescriptors(){return N}};registerProcessor("VaFilterWorklet",O);})();`;
