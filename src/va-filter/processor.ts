export const PROCESSOR = `(()=>{function _(s){return Object.keys(s).map(e=>{let{min:t,max:c,init:o}=s[e];return{name:e,minValue:t,maxValue:c,defaultValue:o,automationRate:"k-rate"}})}var x=Math.PI,d=2*x,H=x*x;var w=4/x,B=-4/H;var l=5/12,L=Math.pow(10,-1/l),D=1/(1-L),V=1/(1+l*Math.log10(1+L)),I=1/(1+-Math.pow(10,-1/l)),W=l*Math.log10(1+L),E=1/(-l*Math.log10(L)+W);function m(s){let e=1/(2*s),t=0,c=0,o={a:0,b:1},r={LP:0,HP:0,AP:0,ALP:0};function i(a){if(a===t)return;t=a;let n=Math.tan(d*t*e);o.a=n/(1+n)}function u(a){let n=(a-c)*o.a;return r.LP=(a-c)*o.a+c,r.HP=a-r.LP,r.AP=r.LP-r.HP,r.ALP=r.LP+o.a*r.HP,c=n+r.LP,r}function P(){return c*o.b}return{coeff:o,process:u,update:i,fb:P}}function N(s){let e=1/(2*s),t=0,c=0,o={K:1,a:0,b:0,g:0},r=m(s),i=m(s),u=m(s),P=m(s),a=m(s),n=m(s),p={LP:0,HP:0,ALP:0};function A(b,f){b==t&&f==c||(t=b,o.K=c=f,o.g=Math.tan(d*t*e),o.a=o.g/(1+o.g),o.b=1/(1-o.K*o.a+o.K*o.a*o.a),r.coeff.a=i.coeff.a=u.coeff.a=o.a,P.coeff.a=a.coeff.a=n.coeff.a=o.a,i.coeff.b=o.K*(1-o.a)/(1+o.g),u.coeff.b=-1/(1+o.g),a.coeff.b=-o.a/(1+o.g),n.coeff.b=1/(1+o.g))}function h(b){let f=r.process(b),O=i.fb()+u.fb(),y=o.a*(f.ALP+O);if(f=i.process(y),p.LP=f.LP*o.K,p.ALP=f.ALP*o.K,u.process(p.LP),f=P.process(b),O=a.fb()+n.fb(),y=o.a*(f.HP+O),p.HP=y*o.K,f=a.process(p.HP),n.process(f.HP),o.K>0){let S=1/o.K;p.LP*=S,p.HP*=S,p.ALP*=S}return p}return{update:A,process:h}}function M(s){let e=0,t=0,c=1/(2*s),o={a:0,b:1,s:1,r:1},r={LP:0,HP:0,BP:0,BS:0,ALP:0},i=0,u=0;function P(n,p){if(n===e&&p===t)return;e=n,t=p,o.a=Math.tan(d*e*c);let A=1/(2*t);o.b=1/(1+2*A*o.a+o.a*o.a),t>24.9?o.r=o.a:o.r=2*A+o.a;let h=s/2/e;o.s=1/(o.a*h*h)}function a(n){return r.HP=o.b*(n-o.r*i-u),r.BP=o.a*r.HP+i,r.LP=o.a*r.BP+u,r.BS=r.HP+r.LP,r.ALP=r.LP+o.s*i,i=o.a*r.HP+r.BP,u=o.a*r.BP+r.LP,r}return{update:P,process:a,coeff:o}}var g={type:{min:0,max:14,init:1},frequency:{min:0,max:1e4,init:1e3},resonance:{min:0,max:1,init:.5}},k=class{constructor(e){this.sampleRate=e;this.filterType=0,this.va1=m(e),this.va2=M(e),this.korg35=N(e),this.process=t=>t,this.processors=[t=>t,t=>this.va1.process(t).LP,t=>this.va1.process(t).HP,t=>this.va1.process(t).ALP,t=>this.va2.process(t).LP,t=>this.va2.process(t).HP,t=>this.va2.process(t).BP,t=>this.va2.process(t).BS,t=>this.va2.process(t).ALP,t=>this.korg35.process(t).LP,t=>this.korg35.process(t).HP],this.setParams(1,g.frequency.init,g.resonance.init)}setParams(e,t,c){this.filterType!==e&&(this.process=this.processors[e]??this.processors[0]),this.#o(t,c)}#o(e,t){this.va1.update(e),this.va2.update(e,t),this.korg35.update(e,t)}};var K=_(g),C=class extends AudioWorkletProcessor{constructor(){super();this.processor=new k(sampleRate)}process(t,c,o){let r=o.type[0],i=o.frequency[0],u=o.resonance[0];this.processor.setParams(r,i,u);let P=t[0][0],a=c[0][0];if(!P||!a)return!0;for(let n=0;n<a.length;n++)a[n]=this.processor.process(P[n]);return!0}static get parameterDescriptors(){return K}};registerProcessor("VaFilterWorklet",C);})();`;
