export const PROCESSOR = `(()=>{function d(s){return Object.keys(s).map(e=>{let{min:t,max:r,defaultValue:o}=s[e];return{name:e,minValue:t,maxValue:r,defaultValue:o,automationRate:"k-rate"}})}var a=Math.PI,h=2*a,k=a*a,_=4/a,T=-4/k;var n=5/12,c=Math.pow(10,-1/n),C=1/(1-c),O=1/(1+n*Math.log10(1+c)),N=1/(1+-Math.pow(10,-1/n)),M=n*Math.log10(1+c),D=1/(-n*Math.log10(c)+M);var i=class{constructor(e){this.sampleRate=e;this.halfSamplePeriod=1/(2*e),this.cutoffFrequency=0,this.state=0,this.coeff=0,this.output={LPF1:0,HPF1:0,APF1:0,ANM_LPF1:0},this.update(1e3)}update(e){if(e===this.cutoffFrequency)return;this.cutoffFrequency=e;let t=Math.tan(h*this.cutoffFrequency*this.halfSamplePeriod);this.coeff=t/(1+t)}process(e){let t=(e-this.state)*this.coeff;return this.output.LPF1=(e-this.state)*this.coeff+this.state,this.output.HPF1=e-this.output.LPF1,this.output.APF1=this.output.LPF1-this.output.HPF1,this.output.ANM_LPF1=this.output.LPF1+this.coeff*this.output.HPF1,this.state=t+this.output.LPF1,this.output}};var p={filterType:{min:0,max:14,defaultValue:1},frequency:{min:0,max:1e4,defaultValue:1e3},resonance:{min:0,max:1,defaultValue:.5}},f=class{constructor(e){this.sampleRate=e;this.filterType=0,this.filterVa1=new i(e),this.process=t=>t,this.setParams(1,p.frequency.defaultValue,p.resonance.defaultValue)}setParams(e,t,r){this.filterType!==e&&this.#e(e),this.#t(t,r)}#e(e){switch(this.filterType=e,e){case 1:this.process=t=>this.filterVa1.process(t).LPF1;break;case 2:this.process=t=>this.filterVa1.process(t).HPF1;break;case 3:this.process=t=>this.filterVa1.process(t).APF1;break;default:this.process=t=>t;break}}#t(e,t){switch(this.filterType){case 1:case 2:case 3:this.filterVa1.update(e)}}};var P=class extends AudioWorkletProcessor{constructor(){super();this.impulse=new f(sampleRate)}process(t,r,o){let l=o.filterType[0],y=o.frequency[0],F=o.resonance[0];this.impulse.setParams(l,y,F);let x=t[0][0],b=r[0][0];for(let u=0;u<b.length;u++)b[u]=this.impulse.process(x[u]);return!0}static get parameterDescriptors(){return P.PARAMS}},m=P;m.PARAMS=d(p);registerProcessor("FilterWorklet",m);})();`;
