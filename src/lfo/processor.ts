export const PROCESSOR = `(()=>{function g(t){return Object.keys(t).map(e=>{let{min:o,max:r,defaultValue:a}=t[e];return{name:e,minValue:o,maxValue:r,defaultValue:a,automationRate:"k-rate"}})}var s=Math.PI,T=2*s,N=s*s,R=4/s,S=-4/N,v=.225;function P(t){let e=R*t+S*t*Math.abs(t);return v*(e*Math.abs(e)-e)+e}var i=5/12,m=Math.pow(10,-1/i),F=1/(1-m),W=1/(1+i*Math.log10(1+m)),z=1/(1+-Math.pow(10,-1/i)),y=i*Math.log10(1+m),q=1/(-i*Math.log10(m)+y);function p(t){if(t>=1)return 1;if(t<=0)return 0;let e=-i*q*Math.log10(1-t+m)+y;return f(e,0,1)}function f(t,e,o){return Math.max(e,Math.min(o,t))}function n(t){return 2*t-1}function A(t,e){return(e+t%e)%e}function M(t,e,o){return e+A(t-e,o-e)}function O(t,e){return t=f(t,-1,1),Math.floor((t+1)/2*e+.5)/e}var h=class{constructor(e){this.sampleRate=e;this.mcounter=0;this.phaseInc=0;this.phaseOffset=0;this.freqOffset=0;this.freqHz=0;this.mcounter=0,this.phaseOffset=0,this.freqOffset=0}setFrequency(e){this.freqHz=e,this.phaseInc=this.freqHz/this.sampleRate}addPhaseOffset(e,o){this.phaseOffset=e,this.phaseInc>0?this.mcounter+=e:this.mcounter-=e,o&&this.wrapClock()}removePhaseOffset(){this.phaseInc>0?this.mcounter+=-this.phaseOffset:this.mcounter-=-this.phaseOffset}advanceClock(e){this.mcounter+=e*this.phaseInc}wrapClock(){if(this.mcounter>=0&&this.mcounter<=1)return!1;let e=this.mcounter<0;return!e&&this.mcounter<2?this.mcounter-=1:e&&this.mcounter>-1?this.mcounter+=1:this.mcounter=M(this.mcounter,0,1),!0}};var d=class{constructor(e){this.sampleRate=e;this.active=!1;this.value=0}tick(){}};function D(t,e,o,r){let a=Math.sqrt(-2*Math.log(o))*Math.cos(2*Math.PI*r);return t+e*a}function E(t=1234567){let r=Math.pow(2,32);return()=>(t=(1664525*t+1013904223)%r,t/r)}var b=class{constructor(){this.bN=[.99765,-.96362,.46454];this.doWhiteNoise=Math.random}setDeterministicWhiteNoise(e){this.doWhiteNoise=E(e)}doGaussianWhiteNoise(e=0,o=1){return D(e,o,this.doWhiteNoise(),this.doWhiteNoise())}doPinkNoise(){let e=this.doWhiteNoise();return this.bN[0]=.99765*this.bN[0]+e*.099046,this.bN[1]=.963*this.bN[1]+e*.2965164,this.bN[2]=.57*this.bN[2]+e*1.0526913,this.bN[0]+this.bN[1]+this.bN[2]+e*.1848}};var l=class{constructor(){this.counter=0;this.targetValueInSamples=0}resetTimer(){this.counter=0}setExpireSamples(e){this.targetValueInSamples=e}setExpireMilliSec(e,o){this.setExpireSamples(Math.floor(o*(e/1e3)))}getExpireSamples(){return this.targetValueInSamples}timerExpired(){return this.counter>=this.targetValueInSamples}advanceTimer(e=1){this.counter+=e}getTick(){return this.counter}};var u={waveform:0,mode:0,frequency:10,offset:0,gain:10,quantize:0},c={waveform:{min:0,max:9,defaultValue:u.waveform},frequency:{min:.02,max:200,defaultValue:u.frequency},offset:{min:0,max:1e4,defaultValue:u.offset},gain:{min:0,max:1e3,defaultValue:u.gain},quantize:{min:0,max:1e3,defaultValue:u.quantize}},k=class{constructor(e){this.sampleRate=e;this.rshOutputValue=0;this.renderComplete=!1;this.noiseGen=new b;this.params={...u};switch(this.fadeInModulator=new d(e),this.lfoClock=new h(e),this.sampleHoldTimer=new l,this.delayTimer=new l,this.rshOutputValue=this.noiseGen.doWhiteNoise(),this.renderComplete=!1,this.lfoClock.setFrequency(c.frequency.defaultValue),this.params.waveform){case 0:this.lfoClock.addPhaseOffset(.25,!0);break;case 2:case 3:this.lfoClock.addPhaseOffset(.5,!0);break}}fillAudioBuffer(e){for(let o=0;o<e.length;o++)e[o]=this.render(1)}fillControlBuffer(e){let o=this.render(e.length);for(let r=0;r<e.length;r++)e[r]=o}render(e){if(this.renderComplete)return 0;if(!this.delayTimer.timerExpired())return this.delayTimer.advanceTimer(),0;if(this.lfoClock.wrapClock()&&this.params.mode===1)return this.renderComplete=!0,0;let r=0;switch(this.params.waveform){case 0:r=1-2*Math.abs(n(this.lfoClock.mcounter));break;case 1:let a=this.lfoClock.mcounter*T-s;r=P(-a);break;case 2:r=n(this.lfoClock.mcounter);break;case 3:r=-n(this.lfoClock.mcounter);break;case 4:r=n(p(this.lfoClock.mcounter));break;case 5:r=n(p(1-this.lfoClock.mcounter));break;case 6:r=n(p(Math.abs(n(this.lfoClock.mcounter))));break;case 7:r=this.lfoClock.mcounter<=.5?1:-1;break;case 8:this.sampleHoldTimer.timerExpired()?(this.rshOutputValue=this.noiseGen.doWhiteNoise(),this.sampleHoldTimer.resetTimer()):this.sampleHoldTimer.advanceTimer(e),r=this.rshOutputValue;break;case 9:break;default:throw Error("Unknown waveform: "+this.params.waveform)}return this.fadeInModulator.active&&(r*=this.fadeInModulator.value,this.fadeInModulator.tick()),this.params.quantize&&(r=O(r,this.params.quantize)),r*=this.params.gain,this.lfoClock.advanceClock(e),r}setParameters(e,o,r,a){this.params.waveform=f(Math.floor(e),c.waveform.min,c.waveform.max),this.lfoClock.setFrequency(o),this.params.gain=r,this.params.quantize=Math.floor(a),this.params.waveform===8&&this.sampleHoldTimer.setExpireSamples(this.sampleRate/o)}};var I=g(c),w=class extends AudioWorkletProcessor{constructor(){super();this.lfo=new k(sampleRate)}process(o,r,a){this.lfo.setParameters(a.waveform[0],a.frequency[0],a.gain[0],a.quantize[0]);let x=r[0];for(let C=0;C<x.length;C++)this.lfo.fillControlBuffer(x[C]);return!0}static get parameterDescriptors(){return I}};registerProcessor("LfoWorklet",w);})();`;
