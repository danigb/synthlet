export const PROCESSOR = `"use strict";(()=>{var E=Math.PI*2;function M(e,o){let a=1/e,n=0,t=o*a;return{update(u){t=u*a},next(){let u=Math.sin(n*E);return n+=t,n>=1&&(n-=1),u}}}function g(e,o){let a=!1,n=0;return{update(t){t===1?a||(a=!0,n=o):a=!1},next(){return n===0?0:(n--,1)}}}function k(e,o,a,n,t){let u=1/e,s=0,r=0,i=o*u,l=n*u;return{next(){let p=Math.sin(s*E),b=Math.sin(r*E);return s+=i,r+=l,s>=1&&(s-=1),r>=1&&(r-=1),p*a+b*t}}}function D(e){return{next(){return Math.random()*2-1}}}function v(e,o,a){let n=0,t=0,u=0,s=0,r=0,i=0,l=0,p=0,b=1/a,f=.5/e,m=2*Math.PI;return{update(c){t=2*Math.tan(m*f*c),n=1/(1+b*t+t*t),u=t+b},process(c){return l=(c-u*s-r)*n,p=t*l+s,i=t*p+r,s=t*l+p,r=t*p+i,o===0?i:o===1?l:o===2?p:c}}}function y(){let e=0;return{update(o){e=o===1?1:0},next(){return e}}}function x(e,o,a){let r=!1,i=o,l=a,p=Math.exp(-1/(i*e)),b=Math.exp(-1/(l*e)),f=0,m=0;return{update(c,d,A){c===1?r||(r=!0,f=1):r=!1,d!==i&&(i=d,p=Math.exp(-1/(i*e))),A!==l&&(l=A,b=Math.exp(-1/(l*e)))},next(){let c=0;switch(f){case 1:c=p*m+(1-p),c-m<=5e-8&&(f=2),m=c;break;case 2:c=b*m,m=c,c<=5e-8&&(f=0);break;case 0:default:c=0;break}return c}}}var O=e=>{let o=M(e,200),a=g(e,1),n=x(e,.1,.1),t=v(e,0,1),u=y();return(s,r)=>{n.update(r.gate[0],r.attack[0],r.decay[0]),t.update(200+20*r.tone[0]),u.update(r.gate[0]);for(let i=0;i<s.length;i++)s[i]=t.process(o.next()*n.next()+a.next())}},C=e=>{let o=D(e),a=x(e,.1,.1),n=k(e,238,1,476,1),t=x(e,.01,.1);return(u,s)=>{a.update(s.gate[0],s.attack[0],s.decay[0]),t.update(s.gate[0],.01,s.snap[0]);for(let r=0;r<u.length;r++)u[r]=o.next()*a.next()+n.next()*t.next()}};function P(e){switch(e){case"kick":return O(sampleRate);case"snare":return C(sampleRate);default:throw new Error("Invalid instrument: "+e)}}var h=class extends AudioWorkletProcessor{r;g;constructor(o){super(),this.r=!0;let a=o?.processorOptions?.type??"";this.g=P(a),this.port.onmessage=n=>{switch(n.data.type){case"DISCONNECT":this.r=!1;break}}}process(o,a,n){return this.g(a[0][0],n),this.r}static get parameterDescriptors(){return[["gate",0,0,1],["attack",.01,0,10],["decay",.5,0,10],["level",100,0,128],["snap",.2,0,128],["tone",20,0,128]].map(([t,u,s,r])=>({name:t,defaultValue:u,minValue:s,maxValue:r,automationRate:"k-rate"}))}};registerProcessor("Drum8WorkletProcessor",h);})();`;
