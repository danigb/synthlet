export const PROCESSOR = `"use strict";(()=>{function R(){let u=!1;return r=>{if(u===!1&&r>=.9)return u=!0,!0;if(u===!0&&r<.1)return u=!1,!1}}function D(u){let r=Math.exp(-1.5),s=Math.exp(-4.95),n=0,o=0,i=0,b=0,S=0,P=1,d={b:0,c:0},p={b:0,c:0},A={b:0,c:0},x=R(),f=0,e=0;return k(.01,.1,.5,.3),function(a,l,c,y){F(y);for(let m=0;m<l.length;m++){switch(f){case 1:e=d.b+e*d.c,(e>=1||n<=0)&&(e=1,console.log("DECAY"),f=2);break;case 2:e=p.b+e*p.c,(e<=b||o<=0)&&(e=b,console.log("SUSTAIN"),f=3);break;case 3:e=b;break;case 4:e=A.b+e*A.c,(e<=0||i<=0)&&(e=0,console.log("BASE"),f=0)}let I=c?a[m]*e:e;l[m]=I}};function F(t){S=t.offset[0],P=t.gain[0],k(t.attack[0],t.decay[0],t.sustain[0],t.release[0]);let a=x(t.gate[0]);a===!0?f=1:a===!1&&(f=4)}function k(t,a,l,c){(b!==l||o!==a)&&(b=l,o=a,g(p,o,b,s)),n!==t&&(n=t,g(d,n,1+2*r,r)),i!==c&&(i=c,g(A,i,0,s))}function g(t,a,l,c){let y=a*u;t.c=Math.exp(-Math.log((1+c)/c)/y),t.b=(l-c)*(1-t.c)}}var h=class extends AudioWorkletProcessor{p;r=!0;m;constructor(r){super(),this.m=r.processorOptions.mode==="modulator",console.log("AdsrWorkletProcessor",r,this.m),this.p=D(sampleRate),this.port.onmessage=s=>{switch(s.data.type){case"DISPOSE":this.r=!1;break}}}process(r,s,n){let o=s[0][0],i=r[0][0];return this.p(i,o,this.m,n),this.r}static get parameterDescriptors(){return[["gate",0,0,1],["attack",.01,0,10],["decay",.1,0,10],["sustain",.5,0,1],["release",.3,0,100],["offset",0,0,2e4],["gain",1,-2e4,2e4]].map(([r,s,n,o])=>({name:r,defaultValue:s,minValue:n,maxValue:o,automationRate:"k-rate"}))}};registerProcessor("AdsrWorkletProcessor",h);})();`;
