export const PROCESSOR = `"use strict";(()=>{function $(){let u=!1;return a=>{if(u===!1&&a>=.9)return u=!0,!0;if(u===!0&&a<.1)return u=!1,!1}}function F(u){let a=Math.exp(-1.5),c=Math.exp(-4.95),i=0,n=0,l=0,f=0,y=0,h=1,g={b:0,c:0},d={b:0,c:0},p={b:0,c:0},P=$(),b=0,t=0;return x(.01,.1,.5,.3),{agen:k,amod:M};function M(e,r,o){k(r,o);for(let s=0;s<r.length;s++)r[s]*=e[s]}function k(e,r){D(r);for(let o=0;o<e.length;o++){switch(b){case 1:t=g.b+t*g.c,(t>=1||i<=0)&&(t=1,b=2);break;case 2:t=d.b+t*d.c,(t<=f||n<=0)&&(t=f,b=3);break;case 3:t=f;break;case 4:t=p.b+t*p.c,(t<=0||l<=0)&&(t=0,b=0)}e[o]=t*h+y}}function D(e){let r=P(e.gate[0]);r===!0?b=1:r===!1&&(b=4),x(e.attack[0],e.decay[0],e.sustain[0],e.release[0]),y=e.offset[0],h=e.gain[0]}function x(e,r,o,s){f!==o&&(f=o,n=r,m(d,n,f,c)),i!==e&&(i=e,m(g,i,1+2*a,a)),n!==r&&(n=r,m(d,n,f,c)),l!==s&&(l=s,m(p,l,0,c))}function m(e,r,o,s){let R=r*u;e.c=Math.exp(-Math.log((1+s)/s)/R),e.b=(o-s)*(1-e.c)}}var A=class extends AudioWorkletProcessor{p;g;r=!0;constructor(a){super(),this.g=a?.processorOptions?.mode!=="Modifier",this.p=F(sampleRate),this.port.onmessage=c=>{switch(c.data.type){case"STOP":this.r=!1;break}}}process(a,c,i){let n=c[0][0],l=a[0][0];return this.g?this.p.agen(n,i):l&&this.p.amod(l,n,i),this.r}static get parameterDescriptors(){return[["gate",0,0,1],["attack",.01,0,1],["decay",.1,0,1],["sustain",.5,0,1],["release",.3,0,1],["offset",0,0,2e4],["gain",1,-2e4,2e4]].map(([a,c,i,n])=>({name:a,defaultValue:c,minValue:i,maxValue:n,automationRate:"k-rate"}))}};registerProcessor("AdsrWorkletProcessor",A);})();`;
