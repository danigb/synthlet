export const PROCESSOR = `"use strict";(()=>{function $(){let i=!1;return a=>{if(i===!1&&a>=.9)return i=!0,!0;if(i===!0&&a<.1)return i=!1,!1}}function F(i){let a=Math.exp(-1.5),c=Math.exp(-4.95),u=0,s=0,f=0,l=0,y=0,h=1,g={b:0,c:0},d={b:0,c:0},p={b:0,c:0},P=$(),b=0,t=0;return D(.01,.1,.5,.3),{agen:k,amod:x};function x(e,r,o){k(r,o);for(let n=0;n<r.length;n++)r[n]*=e[n]}function k(e,r){R(r);for(let o=0;o<e.length;o++){switch(b){case 1:t=g.b+t*g.c,(t>=1||u<=0)&&(t=1,b=2);break;case 2:t=d.b+t*d.c,(t<=l||s<=0)&&(t=l,b=3);break;case 3:t=l;break;case 4:t=p.b+t*p.c,(t<=0||f<=0)&&(t=0,b=0)}e[o]=t*h+y}}function R(e){y=e.offset[0],h=e.gain[0],D(e.attack[0],e.decay[0],e.sustain[0],e.release[0]);let r=P(e.gate[0]);r===!0?b=1:r===!1&&(b=4)}function D(e,r,o,n){l!==o&&(l=o,s=r,m(d,s,l,c)),u!==e&&(u=e,m(g,u,1+2*a,a)),s!==r&&(s=r,m(d,s,l,c)),f!==n&&(f=n,m(p,f,0,c))}function m(e,r,o,n){let S=r*i;e.c=Math.exp(-Math.log((1+n)/n)/S),e.b=(o-n)*(1-e.c)}}var A=class extends AudioWorkletProcessor{p;g;r=!0;constructor(a){super(),this.g=a?.processorOptions?.mode!=="modulator",this.p=F(sampleRate),this.port.onmessage=c=>{switch(c.data.type){case"DISPOSE":this.r=!1;break}}}process(a,c,u){let s=c[0][0];if(this.g)this.p.agen(s,u);else{let f=a[0][0];this.p.amod(f,s,u)}return this.r}static get parameterDescriptors(){return[["gate",0,0,1],["attack",.01,0,10],["decay",.1,0,10],["sustain",.5,0,1],["release",.3,0,100],["offset",0,0,2e4],["gain",1,-2e4,2e4]].map(([a,c,u,s])=>({name:a,defaultValue:c,minValue:u,maxValue:s,automationRate:"k-rate"}))}};registerProcessor("AdsrWorkletProcessor",A);})();`;
