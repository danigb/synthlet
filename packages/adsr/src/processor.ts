export const PROCESSOR = `"use strict";(()=>{function I(){let u=!1;return r=>{if(u===!1&&r>=.9)return u=!0,!0;if(u===!0&&r<.1)return u=!1,!1}}function D(u){let r=Math.exp(-1.5),n=Math.exp(-4.95),s=0,o=0,l=0,b=0,p={b:0,c:0},y={b:0,c:0},A={b:0,c:0},x=I(),f=0,e=0;return k(.01,.1,.5,.3),function(a,i,c,m){F(m);let P=m.offset[0],R=m.gain[0];for(let d=0;d<i.length;d++){switch(f){case 1:e=p.b+e*p.c,(e>=1||s<=0)&&(e=1,f=2);break;case 2:e=y.b+e*y.c,(e<=b||o<=0)&&(e=b,f=3);break;case 3:e=b;break;case 4:e=A.b+e*A.c,(e<=0||l<=0)&&(e=0,f=0)}let S=c?a[d]*e:e;i[d]=S*R+P}};function F(t){k(t.attack[0],t.decay[0],t.sustain[0],t.release[0]);let a=x(t.gate[0]);a===!0?f=1:a===!1&&(f=4)}function k(t,a,i,c){(b!==i||o!==a)&&(b=i,o=a,h(y,o,b,n)),s!==t&&(s=t,h(p,s,1+2*r,r)),l!==c&&(l=c,h(A,l,0,n))}function h(t,a,i,c){let m=a*u;t.c=Math.exp(-Math.log((1+c)/c)/m),t.b=(i-c)*(1-t.c)}}var g=class extends AudioWorkletProcessor{p;r=!0;m;constructor(r){super(),this.m=r.processorOptions.mode==="modulator",this.p=D(sampleRate),this.port.onmessage=n=>{switch(n.data.type){case"DISPOSE":this.r=!1;break}}}process(r,n,s){let o=this.m?r[0][0]:void 0,l=n[0][0];return this.p(o,l,this.m,s),this.r}static get parameterDescriptors(){return[["gate",0,0,1],["attack",.01,0,10],["decay",.1,0,10],["sustain",.5,0,1],["release",.3,0,100],["offset",0,0,2e4],["gain",1,-2e4,2e4]].map(([r,n,s,o])=>({name:r,defaultValue:n,minValue:s,maxValue:o,automationRate:"k-rate"}))}};registerProcessor("AdsrProcessor",g);})();`;
