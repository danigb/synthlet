export const PROCESSOR = `"use strict";(()=>{function w(s,t){let i=!1,e=!1,r=F(1e3),o=Math.floor(s/t+.5),f=new c(o),a=.99,p=0,b=.99,d=0,x=0;return function(g,y,h,n){d!==h&&(d=h,f.setDelayLength(s/h)),x!==n&&(x=n,b=n*.2+.792,a=Math.max(0,Math.min(1,n))),y===1?i||(i=!0,e=!0):i=!1;for(let l=0;l<g.length;l++){let A=r(e);e=!1;let m=f.read()*1*a+p*(1-a);p=m,g[l]=A*m*b}}}var c=class{constructor(t){this.size=t;this.buffer=new Float32Array(t),this.writeIndex=0,this.delayLength=10,this.position=t-this.delayLength}buffer;writeIndex;delayLength;position;setDelayLength(t){for(this.delayLength=t,this.position=this.writeIndex-t;this.position<0;)this.position+=this.size}writeAndUpdateIndex(t){this.buffer[this.writeIndex]=t,this.writeIndex++,this.writeIndex>=this.size&&(this.writeIndex=0),this.position++,this.position>=this.size&&(this.position-=this.size)}read(){for(;this.position<0;)this.position+=this.size;let t=Math.floor(this.position),i=t+1;for(;i>=this.size;)i-=this.size;let e=this.position-t,r=this.buffer[t],o=this.buffer[i];return r-e+(o-r)}};function F(s){let t=new Float32Array(s);for(let e=0;e<s;e++)t[e]=1-Math.abs(e/(s/2)-1);let i=t.length;return function(e){return e&&(i=0),i<t.length?(i++,(Math.random()*2-1)*t[i]):0}}var u=class extends AudioWorkletProcessor{r;g;constructor(){super(),this.r=!0,this.g=w(sampleRate,20),this.port.onmessage=t=>{switch(t.data.type){case"DISPOSE":this.r=!1;break}}}process(t,i,e){let r=i[0][0];return this.g(r,e.trigger[0],e.frequency[0],e.damping[0]),this.r}static get parameterDescriptors(){return[["trigger",0,0,1],["frequency",440,20,2e4],["damping",.1,0,1]].map(([t,i,e,r])=>({name:t,defaultValue:i,minValue:e,maxValue:r,automationRate:"k-rate"}))}};registerProcessor("KsProcessor",u);})();`;
