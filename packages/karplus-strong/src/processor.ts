export const PROCESSOR = `"use strict";(()=>{function w(a){let t=!1,r=!1,e=P(100),c=.5*a-1,n=new Float32Array(c+1),s=0,o=Math.floor(.2*a),u=1,h=0,p=0,x=0,d=0,A=0,M=0;return function(S,k,g,D){if(A!==g){A=g;let l=a/g,i=Math.floor(l);for(o=s+n.length-i,u=l-i,h=1-u;o>c;)o-=n.length;console.log("DELAY SAMPLES",{delaySamples:l,offset:i,readIndex:o,writeIndex:s,fracA:u,fracB:h})}M!==D&&(d=Math.max(.01,Math.min(.99,D))),k===1?t||(t=!0,r=!0,console.log("START!",d)):t=!1;for(let l=0;l<S.length;l++){let i=e(r);r=!1;let y=i!==0?i*Math.random()*2-1:0,E=y-p*.999;p=y;let F=n[o],v=o===c?n[0]:n[o+1],b=F*u+v*h;x=b+x*.999,n[s]=y+d*b,o++,o>c&&(o=0),s++,s>c&&(s=0),S[l]=E+b}}}function P(a){let t=new Float32Array(a);for(let e=0;e<a;e++)t[e]=1-Math.abs(e/(a/2)-1);let r=t.length;return function(e){return e&&(r=0),r<t.length?(r++,t[r]):0}}var m=class extends AudioWorkletProcessor{r;g;constructor(){super(),this.r=!0,this.g=w(sampleRate),this.port.onmessage=t=>{switch(t.data.type){case"DISPOSE":this.r=!1;break}}}process(t,r,e){let f=r[0][0];return this.g(f,e.trigger[0],e.frequency[0],e.feedback[0]),this.r}static get parameterDescriptors(){return[["trigger",0,0,1],["frequency",440,20,2e4],["feedback",.6,0,1]].map(([t,r,e,f])=>({name:t,defaultValue:r,minValue:e,maxValue:f,automationRate:"k-rate"}))}};registerProcessor("KsProcessor",m);})();`;
