export const PROCESSOR = `"use strict";(()=>{function F(o){let e=A(),n=A(),t=A(),s=A(),a=.5,c=.83,b=7,d=k(o,1,a,b),g=k(o,0,a,b),u=k(o,0,c,b),m=k(o,1,c,b),i=!0,h=!0;return{update(p,y,r,f){i=p===1,h=y===1,r!==a&&(console.log("lfoRate1",r),a=r,d.setLfoRate(r),g.setLfoRate(r)),f!==c&&(console.log("lfoRate1",r),c=f,u.setLfoRate(f),m.setLfoRate(f))},process(p,y){let r=p[0],f=p.length>1?p[1]:r;for(let l=0;l<r.length;l++){let L=r[l],C=f[l],R=L,x=C;i&&(R=e.process(d.process(R)),x=n.process(g.process(x))),h&&(R=t.process(u.process(R)),x=s.process(m.process(x))),y[0][l]=L+1.4*R,y[1][l]=C+1.4*x}}}}function A(){let o=0,e=0,t=.999-.01*.4;return{process(s){let a=s-o+t*e;return o=s,e=a,a}}}function I(o=.99){let e=o*.98,n=e*e*e*e,t=0,s=1/4294967295;return{tick(a){let c=1-n*a+n*t+s;return t=c,c}}}function k(o,e,n,t){let s=0,a=0,c=e*2-1,b=4*n/o,d=1,g=Math.floor(o*t*.001)+1,u=g+2e3,m=new Float32Array(u).fill(0),i=u-1,h=0,p=I(.99);function y(){return c>=1&&(d=-1),c<=-1&&(d=1),c+=d*b,c}return{setLfoRate(r){b=4*r/o},process(r){r=r*.2;let f=(.3*y()+.4)*g,l=i-Math.floor(f);l<0&&(l+=u);let L=l-1;L<0&&(L+=u);let C=f-Math.floor(f);return h=m[L]+m[l]*(1-C)-(1-C)*s,s=h,h=p.tick(h),m[i]=r,i++,i>=u&&(i=0),h}}}var S=class extends AudioWorkletProcessor{r;p;constructor(){super(),this.r=!0,this.p=F(sampleRate),this.port.onmessage=e=>{switch(e.data.type){case"DISCONNECT":this.r=!1;break}}}process(e,n,t){if(!(e.length<1||n.length<1))if(t.bypass[0]===1){let s=e[0].length===1;n[0][1].set(e[0][0]),n[0][0].set(e[0][s?0:1])}else this.p.update(t.enable1[0],t.enable2[0],t.lfoRate1[0],t.lfoRate2[0]),this.p.process(e[0],n[0]);return this.r}static get parameterDescriptors(){return[["bypass",0,0,1],["enable1",1,0,1],["enable2",1,0,1],["lfoRate1",.5,0,1],["lfoRate2",.83,0,1]].map(([e,n,t,s])=>({name:e,defaultValue:n,minValue:t,maxValue:s,automationRate:"k-rate"}))}};registerProcessor("ChorusWorkletProcessor",S);})();`;
