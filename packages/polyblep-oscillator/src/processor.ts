export const PROCESSOR = `"use strict";(()=>{function O(u){let l=1/u,s=0,a=g,i=440,r=0,o=i*l,E=0,S=Math.exp(-1/(.0025*u)),F=0,f=0,x=[g,R,b,L];return function(t,e,h){s!==e&&(console.log("POLYBLEP WT",s),s=e,a=x[s]??g),i!==h&&(console.log("POLYBLEP FREQ",h),i=h,o=i*l),a(t)};function g(n){for(let t=0;t<n.length;t++)n[t]=Math.sin(r),r+=o,r>1&&(r-=1)}function R(n){for(let t=0;t<n.length;t++)n[t]=r*2-1-c(r,o),r+=o,r>1&&(r-=1)}function b(n){for(let t=0;t<n.length;t++)n[t]=(r<.5?-1:1)-c(r,o)+c((r+.5)%1,o),r+=o,r>1&&(r-=1)}function L(n){for(let t=0;t<n.length;t++){let e=(r<.5?-1:1)-c(r,o)+c((r+.5)%1,o);e*=4/i,e+=E,E=e,f=e-F+S*f,F=e,n[t]=f*.8,r+=o,r>1&&(r-=1)}}function c(n,t){if(n<t){let e=n/t;return e+e-e*e-1}else if(n>1-t){let e=(n-1)/t;return e+e+e*e+1}else return 0}}var A=class extends AudioWorkletProcessor{r;g;constructor(){super(),this.r=!0,this.g=O(sampleRate),this.port.onmessage=l=>{switch(l.data.type){case"DISPOSE":this.r=!1;break}}}process(l,s,a){return s[0][0]&&this.g(s[0][0],a.type[0],a.frequency[0]),this.r}static get parameterDescriptors(){return[["type",0,0,10],["frequency",0,0,2e4]].map(([l,s,a,i])=>({name:l,defaultValue:s,minValue:a,maxValue:i,automationRate:"k-rate"}))}};registerProcessor("PolyBLEProcessor",A);})();`;
