"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{3175:function(e,t,r){r.d(t,{$:function(){return a}});var o=r(4314);async function a(){let e=new AudioContext;return await (0,o.gB)(e),e}},5500:function(e,t,r){r.d(t,{i:function(){return n}});var o=r(7949),a=r(6265);function n(e){let{label:t,min:r=0,max:n=1,initial:s=0,onChange:i,step:l,transform:u=e=>e,inputClassName:c,labelClassName:p,valueClassName:d,units:f,initialize:m}=e,[h,g]=(0,a.useState)(s);return(0,a.useEffect)(()=>{m&&i(s)},[m]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:p,children:t}),(0,o.jsx)("input",{className:c,type:"range",min:r,max:n,step:null!=l?l:"any",value:h,onChange:e=>{let t=e.target.valueAsNumber;g(t),i(u(t))}}),(0,o.jsxs)("div",{className:d,children:[u(h).toFixed(2),f]})]})}},1987:function(e,t,r){r.d(t,{AttackDecayExample:function(){return l}});var o=r(7949),a=r(5500),n=r(6265),s=r(4314),i=r(9661);function l(){let[e,t]=(0,n.useState)(!1);return e?(0,o.jsx)(u,{onClose:()=>t(!1)}):(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-secondary",onClick:()=>t(!0),children:"Open example"})}function u(e){let{onClose:t}=e,r=(0,i.Z)((0,s.hp)(e=>{let t=e.param(),r=e.param(),o=e.param();return e.synth(e.serial(e.sine(e.ad(t,o,r,{offset:440,gain:2e3})),e.amp(.2)),{trigger:t,release:r,attack:o})}));return r?(0,o.jsxs)("div",{className:"bg-fd-card text-fd-foreground p-2 border rounded",children:[(0,o.jsx)("div",{className:"text-xl mb-4",children:"AttackDecay generator example"}),(0,o.jsx)("div",{className:"flex ",children:(0,o.jsx)(a.i,{label:"Attack",labelClassName:"w-20 text-right mr-2",min:0,max:1,step:.001,initial:.1,onChange:e=>{r.attack.value=e},initialize:!0})}),(0,o.jsx)("div",{className:"flex ",children:(0,o.jsx)(a.i,{label:"Release",labelClassName:"w-20 text-right mr-2",min:0,max:1,step:.001,initial:.2,onChange:e=>{r.release.value=e},initialize:!0})}),(0,o.jsx)("div",{className:"flex mb-4",children:(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-primary text-fd-primary-foreground",onMouseDown:()=>{r.trigger.value=1},onMouseUp:()=>{r.trigger.value=0},children:"Trigger"})}),(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-secondary",onClick:t,children:"Close"})]}):null}},5011:function(e,t,r){r.d(t,{DrumExample:function(){return l}});var o=r(7949),a=r(5500),n=r(6265),s=r(4314),i=r(9661);function l(e){let{instrumentName:t}=e,[r,a]=(0,n.useState)(!1);return r?(0,o.jsx)(u,{instrumentName:t,onClose:()=>a(!1),createSynth:function(e){switch(e){case"KickDrum":return s.nl;case"ClaveDrum":return s.m7;case"SnareDrum":return s.vD;default:throw Error("Unknown instrument: ".concat(e))}}(t)}):(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-secondary",onClick:()=>a(!0),children:"Open example"})}function u(e){let{instrumentName:t,onClose:r,createSynth:s}=e,[l,u]=(0,n.useState)(0),[c,p]=(0,n.useState)(-60),d=(0,i.Z)(s);return d?(0,o.jsxs)("div",{className:"bg-fd-card text-fd-foreground p-2 border rounded",children:[(0,o.jsxs)("div",{className:"text-xl mb-4",children:[t," example"]}),(0,o.jsx)("div",{className:"flex items-center gap-2",children:(0,o.jsx)(a.i,{label:"Tone",labelClassName:"w-20 text-right mr-2",onChange:e=>{d.tone.value=e}})}),(0,o.jsx)("div",{className:"flex gap-2",children:(0,o.jsx)(a.i,{label:"Decay",labelClassName:"w-20 text-right mr-2",initial:.4,initialize:!0,units:"s",onChange:e=>{d.decay.value=e}})}),(0,o.jsx)("div",{className:"flex items-center gap-2 my-4",children:(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-primary text-fd-primary-foreground",onMouseDown:()=>{d.trigger.value=1},onMouseUp:()=>{d.trigger.value=0},children:"Trigger"})}),(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-secondary",onClick:r,children:"Close"})]}):null}},4702:function(e,t,r){r.d(t,{NoiseExample:function(){return i}});var o=r(7949),a=r(6265),n=r(4314),s=r(9661);function i(){let[e,t]=(0,a.useState)(!1);return e?(0,o.jsx)(l,{onClose:()=>t(!1)}):(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-secondary",onClick:()=>t(!0),children:"Start Noise example"})}function l(e){let{onClose:t}=e,[r,i]=(0,a.useState)(0),[l,c]=(0,a.useState)(-60),p=(0,s.Z)(e=>new u(e));return p?(0,o.jsxs)("div",{className:"bg-fd-card text-fd-foreground p-2 border rounded",children:[(0,o.jsx)("div",{className:"text-xl mb-4",children:"Noise generator example"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-16 text-right",children:"Type:"}),(0,o.jsx)("select",{className:"p-1 rounded bg-slate-700 text-slate-200",value:r,onChange:e=>{let t=parseInt(e.target.value);i(t),p.noise.type.setValueAtTime(t,0)},children:(0,n.fF)().map(e=>(0,o.jsx)("option",{value:e.value,children:e.name},e.value))})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,o.jsx)("div",{className:"w-16 text-right",children:"Volume:"}),(0,o.jsx)("input",{type:"range",className:"w-64",min:-60,max:0,step:1,value:l,onChange:e=>{let t=e.target.valueAsNumber;c(t),p.gain.gain.setValueAtTime(t<-60?0:Math.pow(10,t/20),0)}}),(0,o.jsx)("div",{children:l<=-60?"Muted":l+"dB"})]}),(0,o.jsx)("button",{className:"border px-2 py-1 rounded bg-fd-secondary",onClick:t,children:"Close"})]}):null}class u{dispose(){this.gain.disconnect(),this.noise.dispose()}constructor(e){this.gain=new GainNode(e,{gain:0}),this.noise=(0,n.cc)(e,{type:"White Random"}),this.noise.connect(this.gain),this.connect=this.gain.connect.bind(this.gain)}}},6578:function(e,t,r){r.d(t,{ClockExample:function(){return l}});var o=r(7949),a=r(3175),n=r(5500),s=r(6265),i=r(4314);function l(){let[e,t]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e;console.log("connecting");let r=!1;return(0,a.$)().then(o=>{r||(console.log("connected",e=new u(o)),t(e))}),()=>{r=!0,console.log("disconnecting",e),null==e||e.disconnect()}},[]),e)?(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{children:"Clock"}),(0,o.jsx)("p",{children:"Test clock module"}),(0,o.jsx)(n.i,{label:"Tempo",initial:120,min:10,max:240,step:1,onChange:t=>{e.clock.bpm.setValueAtTime(t,0)}}),(0,o.jsx)(n.i,{label:"Volume",initial:0,min:0,max:1,step:.1,onChange:t=>{e.out.gain.setValueAtTime(t,0)},initialize:!0})]}):null}class u{disconnect(){this.clock.disconnect(),this.kick.disconnect(),this.out.disconnect()}constructor(e){this.out=new GainNode(e),this.clock=(0,i.Cp)(e),this.kick=(0,i.B7)(e,{type:"kick",gate:0}),this.kick.connect(this.out).connect(e.destination),this.clock.connect(this.kick.gate)}}},9661:function(e,t,r){r.d(t,{Z:function(){return n}});var o=r(3175),a=r(6265);function n(e){let[t,r]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t;console.log("useSynth connecting");let a=!1;return(0,o.$)().then(o=>{a||((t=e(o)).connect(o.destination),console.log("useSynth connected",t),r(t))}),()=>{a=!0,console.log("useSynth dispose",t),null==t||t.dispose()}},[]),t}},4314:function(e,t,r){r.d(t,{m7:function(){return ek},nl:function(){return ev},vD:function(){return ey},Cp:function(){return G},B7:function(){return H},cc:function(){return J},fF:function(){return Q},gB:function(){return eE},hp:function(){return ex}});var o,a,n,s,i,l,u,c,p,d,f,m,h,g,b,v,y,k,x,E,N,_,P,R,w,O,S,A,M,W,T,j=(l='"use strict";(()=>{var M=class extends AudioWorkletProcessor{r;d;constructor(){super(),this.r=!0,this.d=O(sampleRate),this.port.onmessage=a=>{switch(a.data.type){case"DISPOSE":this.r=!1;break}}}process(a,n,t){return this.d.update(t.trigger[0],t.attack[0],t.decay[0]),this.d.gen(n[0][0],t.offset[0],t.gain[0]),this.r}static get parameterDescriptors(){return[["trigger",0,0,1],["attack",.01,0,10],["decay",.1,0,10],["offset",0,0,2e4],["gain",1,0,1e4]].map(([a,n,t,d])=>({name:a,defaultValue:n,minValue:t,maxValue:d,automationRate:"k-rate"}))}};registerProcessor("AdProcessor",M);function O(l){let D=l*.05,g=l*.1,u=!1,E=.1,f=.1,h=Math.exp(-1/(.1*D)),A=Math.exp(-1/(.1*g)),r=0,s=0;return{update(o,c,i){if(o===1?u||(u=!0,r=1):u=!1,c!==E){E=c;let e=Math.max(E*D,.001);h=Math.exp(-1/e)}if(i!==f){f=i;let e=Math.max(f*g,.001);A=Math.exp(-1/e)}},gen(o,c,i){let e=0;for(let p=0;p<o.length;p++)r===1?(e=h*s+(1-h),e-s<=5e-8&&(r=2),s=e):r===2?(e=A*s,s=e,e<=5e-8&&(r=0)):e=0,o[p]=c+e*i}}}})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_AD_ENV_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([l],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),D=(u={processorName:"AdProcessor",paramNames:["trigger","attack","decay","offset","gain"],workletOptions:()=>({numberOfInputs:0,numberOfOutputs:1})},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=u.validateParams)||void 0===t||t.call(u,a);let n=new AudioWorkletNode(e,u.processorName,u.workletOptions(a));n.__PROCESSOR_NAME__=u.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?(console.log("SET",a,n),t.value=n):n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,u.paramNames,a);return null===(r=u.postCreate)||void 0===r||r.call(u,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),I=(c='"use strict";(()=>{function $(){let i=!1;return a=>{if(i===!1&&a>=.9)return i=!0,!0;if(i===!0&&a<.1)return i=!1,!1}}function F(i){let a=Math.exp(-1.5),c=Math.exp(-4.95),u=0,s=0,f=0,l=0,y=0,h=1,g={b:0,c:0},d={b:0,c:0},p={b:0,c:0},P=$(),b=0,t=0;return D(.01,.1,.5,.3),{agen:k,amod:x};function x(e,r,o){k(r,o);for(let n=0;n<r.length;n++)r[n]*=e[n]}function k(e,r){R(r);for(let o=0;o<e.length;o++){switch(b){case 1:t=g.b+t*g.c,(t>=1||u<=0)&&(t=1,b=2);break;case 2:t=d.b+t*d.c,(t<=l||s<=0)&&(t=l,b=3);break;case 3:t=l;break;case 4:t=p.b+t*p.c,(t<=0||f<=0)&&(t=0,b=0)}e[o]=t*h+y}}function R(e){y=e.offset[0],h=e.gain[0],D(e.attack[0],e.decay[0],e.sustain[0],e.release[0]);let r=P(e.gate[0]);r===!0?b=1:r===!1&&(b=4)}function D(e,r,o,n){l!==o&&(l=o,s=r,m(d,s,l,c)),u!==e&&(u=e,m(g,u,1+2*a,a)),s!==r&&(s=r,m(d,s,l,c)),f!==n&&(f=n,m(p,f,0,c))}function m(e,r,o,n){let S=r*i;e.c=Math.exp(-Math.log((1+n)/n)/S),e.b=(o-n)*(1-e.c)}}var A=class extends AudioWorkletProcessor{p;g;r=!0;constructor(a){super(),this.g=a?.processorOptions?.mode!=="modulator",this.p=F(sampleRate),this.port.onmessage=c=>{switch(c.data.type){case"DISPOSE":this.r=!1;break}}}process(a,c,u){let s=c[0][0];if(this.g)this.p.agen(s,u);else{let f=a[0][0];this.p.amod(f,s,u)}return this.r}static get parameterDescriptors(){return[["gate",0,0,1],["attack",.01,0,10],["decay",.1,0,10],["sustain",.5,0,1],["release",.3,0,100],["offset",0,0,2e4],["gain",1,-2e4,2e4]].map(([a,c,u,s])=>({name:a,defaultValue:c,minValue:u,maxValue:s,automationRate:"k-rate"}))}};registerProcessor("AdsrWorkletProcessor",A);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_ADSR_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([c],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),L=(p='"use strict";(()=>{function P(r){let e=S(),o=S(),t=S(),s=S(),a=.5,c=.83,b=7,d=k(r,1,a,b),g=k(r,0,a,b),u=k(r,0,c,b),m=k(r,1,c,b),i=!0,h=!0;return{update(p,y,n,f){i=p===1,h=y===1,n!==a&&(a=n,d.setLfoRate(n),g.setLfoRate(n)),f!==c&&(c=f,u.setLfoRate(f),m.setLfoRate(f))},process(p,y){let n=p[0],f=p.length>1?p[1]:n;for(let l=0;l<n.length;l++){let L=n[l],R=f[l],x=L,A=R;i&&(x=e.process(d.process(x)),A=o.process(g.process(A))),h&&(x=t.process(u.process(x)),A=s.process(m.process(A))),y[0][l]=L+1.4*x,y[1][l]=R+1.4*A}}}}function S(){let r=0,e=0,t=.999-.01*.4;return{process(s){let a=s-r+t*e;return r=s,e=a,a}}}function F(r=.99){let e=r*.98,o=e*e*e*e,t=0,s=1/4294967295;return{tick(a){let c=1-o*a+o*t+s;return t=c,c}}}function k(r,e,o,t){let s=0,a=0,c=e*2-1,b=4*o/r,d=1,g=Math.floor(r*t*.001)+1,u=g+2e3,m=new Float32Array(u).fill(0),i=u-1,h=0,p=F(.99);function y(){return c>=1&&(d=-1),c<=-1&&(d=1),c+=d*b,c}return{setLfoRate(n){b=4*n/r},process(n){n=n*.2;let f=(.3*y()+.4)*g,l=i-Math.floor(f);l<0&&(l+=u);let L=l-1;L<0&&(L+=u);let R=f-Math.floor(f);return h=m[L]+m[l]*(1-R)-(1-R)*s,s=h,h=p.tick(h),m[i]=n,i++,i>=u&&(i=0),h}}}var C=class extends AudioWorkletProcessor{r;p;constructor(){super(),this.r=!0,this.p=P(sampleRate),this.port.onmessage=e=>{switch(e.data.type){case"DISPOSE":this.r=!1;break}}}process(e,o,t){if(!(e.length<1||o.length<1))if(t.bypass[0]===1){let s=e[0].length===1;o[0][1].set(e[0][0]),o[0][0].set(e[0][s?0:1])}else this.p.update(t.enable1[0],t.enable2[0],t.lfoRate1[0],t.lfoRate2[0]),this.p.process(e[0],o[0]);return this.r}static get parameterDescriptors(){return[["bypass",0,0,1],["enable1",1,0,1],["enable2",1,0,1],["lfoRate1",.5,0,1],["lfoRate2",.83,0,1]].map(([e,o,t,s])=>({name:e,defaultValue:o,minValue:t,maxValue:s,automationRate:"k-rate"}))}};registerProcessor("ChorusTWorkletProcessor",C);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_CHORUS_T_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([p],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),C=((d=C||{})[d.Bypass=0]="Bypass",d[d.Tanh=1]="Tanh",d),V=(f='"use strict";(()=>{function a(e){switch(e){case 1:return l;case 0:default:return h}}var h=e=>e,l=Math.tanh;var p=class extends AudioWorkletProcessor{r;g;t;fn;constructor(){super(),this.r=!0,this.g=!1,this.t=0,this.fn=a(0),this.port.onmessage=s=>{switch(s.data.type){case"DISPOSE":this.r=!1;break}}}process(s,n,t){this.t!==t.clipType[0]&&(this.t=t.clipType[0],this.fn=a(this.t));let o=t.preGain[0],u=t.postGain[0],i=s[0][0],c=n[0][0];if(i&&c)for(let r=0;r<i.length;r++)c[r]=this.fn(i[r]*o)*u;return this.r}static get parameterDescriptors(){return[["clipType",0,0,10],["preGain",1,0,10],["postGain",1,0,10]].map(([s,n,t,o])=>({name:s,defaultValue:n,minValue:t,maxValue:o,automationRate:"k-rate"}))}};registerProcessor("ClipAmpProcessor",p);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_CLIP-AMP_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([f],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),U=(m={processorName:"ClipAmpProcessor",paramNames:["clipType","preGain","postGain"],workletOptions:()=>({numberOfInputs:1,numberOfOutputs:1})},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=m.validateParams)||void 0===t||t.call(m,a);let n=new AudioWorkletNode(e,m.processorName,m.workletOptions(a));n.__PROCESSOR_NAME__=m.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,m.paramNames,a);return null===(r=m.postCreate)||void 0===r||r.call(m,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),G=(h={processorName:"ClockWorkletProcessor",paramNames:["bpm"],workletOptions:()=>({numberOfInputs:0,numberOfOutputs:1})},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=h.validateParams)||void 0===t||t.call(h,a);let n=new AudioWorkletNode(e,h.processorName,h.workletOptions(a));n.__PROCESSOR_NAME__=h.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,h.paramNames,a);return null===(r=h.postCreate)||void 0===r||r.call(h,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),B=(g='"use strict";(()=>{var i=class extends AudioWorkletProcessor{r;bpm;i;p;constructor(){super(),this.r=!0,this.bpm=120,this.i=this.bpm/60/sampleRate,this.p=0,this.port.onmessage=s=>{switch(s.data.type){case"DISPOSE":this.r=!1;break}}}process(s,e,r){r.bpm[0]!==this.bpm&&(this.bpm=r.bpm[0],this.i=this.bpm/60/sampleRate);let t=this.p+e[0][0].length*this.i;t>1&&(t-=1);let a=t<this.p?1:this.p;return e[0][0].fill(a),this.p=t,this.r}static get parameterDescriptors(){return[["bpm",120,30,300]].map(([s,e,r,t])=>({name:s,defaultValue:e,minValue:r,maxValue:t,automationRate:"k-rate"}))}};registerProcessor("ClockWorkletProcessor",i);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_CLOCK_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([g],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),F=((b=F||{})[b.KICK=0]="KICK",b[b.SNARE=1]="SNARE",b),q=(v='"use strict";(()=>{var x=Math.PI*2;function y(t,a,r){if(r>a)throw Error("endFreq must be less than startFreq");let u=1/t,n=!1,c=0,s=(r-a)*u,e=a,o=1;return{update(i,l){i===1?n||(n=!0,e=a):n=!1,l!==o&&(o=l,s=(r-a)*l*u)},next(){let i=Math.sin(c*x);return e>r&&(e+=s),c+=e*u,c>=1&&(c-=1),i}}}function v(t,a){let r=!1,u=0;return{update(n){n===1?r||(r=!0,u=a):r=!1},next(){return u===0?0:(u--,1)}}}function D(t,a,r,u,n){let c=1/t,s=0,e=0,o=a*c,i=u*c;return{next(){let l=Math.sin(s*x),m=Math.sin(e*x);return s+=o,e+=i,s>=1&&(s-=1),e>=1&&(e-=1),l*r+m*n}}}function k(t){return{next(){return Math.random()*2-1}}}function E(t,a,r){let u=0,n=0,c=0,s=0,e=0,o=0,i=0,l=0,m=1/r,p=.5/t,f=2*Math.PI;return{update(b){n=2*Math.tan(f*p*b),u=1/(1+m*n+n*n),c=n+m},process(b){return i=(b-c*s-e)*u,l=n*i+s,o=n*l+e,s=n*i+l,e=n*l+o,a===0?o:a===1?i:a===2?l:b}}}function h(t,a,r){let e=!1,o=a,i=r,l=Math.exp(-1/(o*t)),m=Math.exp(-1/(i*t)),p=0,f=0;return{update(b,A,g){b===1?e||(e=!0,p=1):e=!1,A!==o&&(o=A,l=Math.exp(-1/(Math.max(o,.01)*t))),g!==i&&(i=g,m=Math.exp(-1/(Math.max(i,.01)*t)))},next(){let b=0;switch(p){case 1:b=l*f+(1-l),b-f<=5e-8&&(p=2),f=b;break;case 2:b=m*f,f=b,b<=5e-8&&(p=0);break;case 0:default:b=0;break}return b}}}function d(t){switch(t){case 0:return C(sampleRate);case 1:return O(sampleRate);default:return console.warn("Invalid Drum8 type: ",t),C(sampleRate)}}var C=t=>{let a=y(t,90,48),r=v(t,1),u=h(t,.1,.1),n=E(t,0,1),c=Math.tanh;return(s,e)=>{a.update(e.gate[0],e.decay[0]*.5),u.update(e.gate[0],e.attack[0],e.decay[0]),n.update(200+200*e.tone[0]);for(let o=0;o<s.length;o++)s[o]=c(n.process(a.next()*u.next()+r.next()))}},O=t=>{let a=k(t),r=h(t,.1,.1),u=D(t,238,1,476,1),n=h(t,.01,.1),c=E(t,0,1);return(s,e)=>{r.update(e.gate[0],e.attack[0],e.decay[0]),n.update(e.gate[0],.01,e.snap[0]),c.update(500+500*e.tone[0]);for(let o=0;o<s.length;o++)s[o]=c.process(a.next()*r.next()+u.next()*n.next())}};var M=class extends AudioWorkletProcessor{r;t;g;constructor(a){super(),this.r=!0,this.t=0,this.g=d(this.t),this.port.onmessage=r=>{switch(r.data.type){case"DISPOSE":this.r=!1;break}}}process(a,r,u){return this.t!==u.type[0]&&(this.g=d(u.type[0])),this.g(r[0][0],u),this.r}static get parameterDescriptors(){return[["gate",0,0,1],["attack",.01,0,2],["decay",.5,0,10],["level",.8,0,1],["snap",.2,0,1],["tone",.2,0,1]].map(([u,n,c,s])=>({name:u,defaultValue:n,minValue:c,maxValue:s,automationRate:"k-rate"}))}};registerProcessor("Drum8WorkletProcessor",M);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_DRUM8_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([v],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),H=(y={processorName:"Drum8WorkletProcessor",paramNames:["type","gate","attack","decay","level","snap","tone"],workletOptions:()=>({numberOfInputs:1,numberOfOutputs:1}),postCreate:e=>{e.setGate=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.gate.setValueAtTime(t?1:0,r)}}},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=y.validateParams)||void 0===t||t.call(y,a);let n=new AudioWorkletNode(e,y.processorName,y.workletOptions(a));n.__PROCESSOR_NAME__=y.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,y.paramNames,a);return null===(r=y.postCreate)||void 0===r||r.call(y,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),Y=(k='"use strict";(()=>{var s=class extends AudioWorkletProcessor{r;g;constructor(){super(),this.r=!0,this.g=!1,this.port.onmessage=r=>{switch(r.data.type){case"DISPOSE":this.r=!1;break}}}process(r,e,t){return e[0][0].fill(0),t.trigger[0]===1?this.g||(this.g=!0,e[0][0][0]=1):this.g=!1,this.r}static get parameterDescriptors(){return[["trigger",0,0,1]].map(([r,e,t,a])=>({name:r,defaultValue:e,minValue:t,maxValue:a,automationRate:"k-rate"}))}};registerProcessor("ImpulseProcessor",s);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_IMPULSE_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([k],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),K=(x={processorName:"ImpulseProcessor",paramNames:["trigger"],workletOptions:()=>({numberOfInputs:0,numberOfOutputs:1})},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=x.validateParams)||void 0===t||t.call(x,a);let n=new AudioWorkletNode(e,x.processorName,x.workletOptions(a));n.__PROCESSOR_NAME__=x.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,x.paramNames,a);return null===(r=x.postCreate)||void 0===r||r.call(x,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),$=(E='"use strict";(()=>{function u(e){return 2*e-1}function P(e=5/12){let n=Math.pow(10,-1/e),t=e*Math.log10(1+n),r=1/(-e*Math.log10(n)+t);return s=>{if(s>=1)return 1;if(s<=0)return 0;let l=-e*r*Math.log10(1-s+n)+t;return Math.max(0,Math.min(1,l))}}function S(){let e=w();return(n,t)=>{let r=e;return t<n&&(e=w()),r}}function q(){let e=!0;return(n,t)=>{let r=e?1:0;return e=t<n,r}}var d=P(),A=q(),b=e=>Math.sin(e*2*Math.PI),D=e=>1-2*Math.abs(u(e)),T=e=>u(e),k=e=>-u(e),E=e=>e<=.5?1:-1,w=()=>u(Math.random()),F=e=>u(d(e)),H=e=>u(d(1-e)),I=e=>u(d(Math.abs(u(e)))),U=S();function x(e,n=1){let t=1/e,r=[A,b,D,T,k,E,F,H,I,U],s=n,l=10,p=1,m=0,h=r[n]??b,c=0;function G(a){a.waveform[0]!==s&&(s=a.waveform[0],h=r[Math.floor(s)]??b),l=a.frequency[0],m=a.offset[0],p=a.gain[0]}function M(a,g){G(g);let o=c+a.length*t*l;o>=1&&(o-=1);let i=h(c,o)*p+m;a.fill(i),c=o}function R(a,g){G(g);for(let o=0;o<a.length;o++){let i=c+t*l;i>=1&&(i-=1),a[o]=h(c,i)*p+m,c=i}}return{kgen:M,agen:R}}var y=class extends AudioWorkletProcessor{static get parameterDescriptors(){return[["waveform",1,0,9],["frequency",10,0,200],["gain",1,0,1e4],["offset",0,-1e3,1e3]].map(([n,t,r,s])=>({name:n,defaultValue:t,minValue:r,maxValue:s,automationRate:"k-rate"}))}r;u;constructor(n){super();let t=n?.processorOptions?.waveform??1;this.u=x(sampleRate,t),this.r=!0,this.port.onmessage=r=>{switch(r.data.type){case"DISPOSE":this.r=!1;break}}}process(n,t,r){return this.u.kgen(t[0][0],r),this.r}};registerProcessor("LfoProcessor",y);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_LFO_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([E],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),z=((N=z||{})[N.WHITE=0]="WHITE",N[N.PINK_TRAMMEL=10]="PINK_TRAMMEL",N[N.PINK_COOPER=11]="PINK_COOPER",N);function Q(){return[{name:"White",value:0},{name:"Pink Trammel",value:10}]}var Z=(_='"use strict";(()=>{function g(o,t){switch(t){case 0:return P;case 10:return y();case 11:return M(o);default:return console.warn("Unknown noise type: "+t),P}}function P(o){for(let t=0;t<o.length;t++)o[t]=Math.random()*2-1}function M(o){let t=[0,0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0],i=0,c=0,a=h=>Math.pow(10,h/20),u=h=>20*Math.log10(h),l=0,r=0,d=0,m=o/(2*Math.PI)-1;for(;m>1;)t[l]=2*Math.PI*m/o,m=m/4,l++;for(c=l;l-- >0;)n[l]=a(r),d+=a(r),r-=6;return i=a(-u(d)),h=>{for(let p=0;p<h.length;p++){let b=Math.random()*2-1,f=0;for(let s=0;s<c;s++)e[s]=t[s]*b+(1-t[s])*e[s],f+=e[s]*n[s];h[p]=f*i}}}function y(){let o=[3.8024,2.9694,2.597,3.087,3.4006],t=[.00198,.01478,.06378,.23378,.91578],n=15.8564,e=[0,0,0,0,0],i=0;return c=>{for(let a=0;a<c.length;a++){let u=Math.random(),l=Math.random();for(let r=0;r<5;r++)if(u<t[r]){i-=e[r],e[r]=2*(l-.5)*o[r],i+=e[r];break}c[a]=i/n}}}var A=class extends AudioWorkletProcessor{r;t;d;constructor(){super(),this.r=!0,this.t=0,this.d=g(sampleRate,0),this.port.onmessage=t=>{switch(t.data.type){case"DISPOSE":this.r=!1;break}}}process(t,n,e){return this.t!==e.type[0]&&(this.t=e.type[0],this.d=g(sampleRate,e.type[0])),this.d(n[0][0]),this.r}static get parameterDescriptors(){return[["type",0,0,100]].map(([t,n,e,i])=>({name:t,defaultValue:n,minValue:e,maxValue:i,automationRate:"k-rate"}))}};registerProcessor("NoiseWorkletProcessor",A);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_NOISE_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([_],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),J=(P={processorName:"NoiseWorkletProcessor",paramNames:["type"],workletOptions:()=>({numberOfInputs:0,numberOfOutputs:1})},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=P.validateParams)||void 0===t||t.call(P,a);let n=new AudioWorkletNode(e,P.processorName,P.workletOptions(a));n.__PROCESSOR_NAME__=P.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,P.paramNames,a);return null===(r=P.postCreate)||void 0===r||r.call(P,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),X=((R=X||{})[R.BYPASS=0]="BYPASS",R[R.DB_TO_GAIN=1]="DB_TO_GAIN",R[R.GAIN_TO_DB=2]="GAIN_TO_DB",R[R.LINEAR=3]="LINEAR",R),ee=(w='"use strict";(()=>{function u(t){switch(t){case 0:return i;case 1:return a;case 2:return b;case 3:return h;default:return i}}function i(t){return t}function a(t){return Math.pow(10,t/20)}function b(t){return 20*Math.log10(t)}function h(t,n,r){return n+t*(r-n)}var s=class extends AudioWorkletProcessor{r;t;c;constructor(){super(),this.r=!0,this.t=0,this.c=u(this.t),this.port.onmessage=n=>{switch(n.data.type){case"DISPOSE":this.r=!1;break}}}process(n,r,e){this.t!==e.type[0]&&(this.t=e.type[0],this.c=u(this.t));let o=n[0][0],c=(o?o[0]:0)+e.input[0]+e.offset[0];return r[0][0].fill(this.c(c,e.min[0],e.max[0])),this.r}static get parameterDescriptors(){return[["type",0,0,10],["input",0,0,1e6],["offset",0,0,1e6],["min",0,0,1e6],["max",1,0,1e6]].map(([n,r,e,o])=>({name:n,defaultValue:r,minValue:e,maxValue:o,automationRate:"k-rate"}))}};registerProcessor("ParamProcessor",s);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_PARAM_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([w],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),et=(O={processorName:"ParamProcessor",paramNames:["type","input","offset","min","max"],workletOptions:()=>({numberOfInputs:1,numberOfOutputs:1})},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=O.validateParams)||void 0===t||t.call(O,a);let n=new AudioWorkletNode(e,O.processorName,O.workletOptions(a));n.__PROCESSOR_NAME__=O.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,O.paramNames,a);return null===(r=O.postCreate)||void 0===r||r.call(O,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),er=((S=er||{})[S.SINE=0]="SINE",S[S.SAWTOOTH=1]="SAWTOOTH",S[S.SQUARE=2]="SQUARE",S[S.TRIANGLE=3]="TRIANGLE",S),eo=(A='"use strict";(()=>{function O(u){let l=1/u,s=0,a=g,i=440,r=0,o=i*l,E=0,S=Math.exp(-1/(.0025*u)),F=0,f=0,x=[g,R,b,L];return function(t,e,h){s!==e&&(console.log("POLYBLEP WT",s),s=e,a=x[s]??g),i!==h&&(console.log("POLYBLEP FREQ",h),i=h,o=i*l),a(t)};function g(n){for(let t=0;t<n.length;t++)n[t]=Math.sin(r),r+=o,r>1&&(r-=1)}function R(n){for(let t=0;t<n.length;t++)n[t]=r*2-1-c(r,o),r+=o,r>1&&(r-=1)}function b(n){for(let t=0;t<n.length;t++)n[t]=(r<.5?-1:1)-c(r,o)+c((r+.5)%1,o),r+=o,r>1&&(r-=1)}function L(n){for(let t=0;t<n.length;t++){let e=(r<.5?-1:1)-c(r,o)+c((r+.5)%1,o);e*=4/i,e+=E,E=e,f=e-F+S*f,F=e,n[t]=f*.8,r+=o,r>1&&(r-=1)}}function c(n,t){if(n<t){let e=n/t;return e+e-e*e-1}else if(n>1-t){let e=(n-1)/t;return e+e+e*e+1}else return 0}}var A=class extends AudioWorkletProcessor{r;g;constructor(){super(),this.r=!0,this.g=O(sampleRate),this.port.onmessage=l=>{switch(l.data.type){case"DISPOSE":this.r=!1;break}}}process(l,s,a){return s[0][0]&&this.g(s[0][0],a.type[0],a.frequency[0]),this.r}static get parameterDescriptors(){return[["type",0,0,10],["frequency",0,0,2e4]].map(([l,s,a,i])=>({name:l,defaultValue:s,minValue:a,maxValue:i,automationRate:"k-rate"}))}};registerProcessor("PolyBLEProcessor",A);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_POLYBLEP_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([A],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),ea=(M={processorName:"PolyBLEProcessor",paramNames:["type","frequency"],workletOptions:()=>({numberOfInputs:0,numberOfOutputs:1})},function(e){var t,r;let o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=M.validateParams)||void 0===t||t.call(M,a);let n=new AudioWorkletNode(e,M.processorName,M.workletOptions(a));n.__PROCESSOR_NAME__=M.processorName;let s=function(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(console.log("POLY CNNECT",a,n),t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}(n,M.paramNames,a);return null===(r=M.postCreate)||void 0===r||r.call(M,n),o=!1,Object.assign(n,{dispose(){var e,t;if(!o&&(o=!0,n.disconnect(),null===(e=n.port)||void 0===e||e.postMessage({type:"DISPOSE"}),s))for(;s.length;){let e=s.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(t=e.dispose)||void 0===t||t.call(e):e.disconnect():"function"==typeof e&&e()}}})}),en=(W='"use strict";(()=>{function x(n,e,r){return Math.max(e,Math.min(r,n))}function V(n){let e=1e3,r=.5,o=1,s=.5/n,c=2*Math.PI,b=0,t=0,P=0,m=0,p=0,f=0,u=0,h=0;function g(a){if(o=a.filterType[0],a.frequency[0]!==e||a.resonance[0]!==r){e=a.frequency[0],r=a.resonance[0];let y=x(e,16,n/2),i=1/x(r,.025,40);t=2*n*Math.tan(c*s*y)*s,b=1/(1+i*t+t*t),P=t+i}}function k(a,y){for(let l=0;l<a.length;l++){let i=a[l];f=(i-P*m-p)*b,u=t*f+m,h=t*u+p,m=t*f+u,p=t*u+h,y[l]=o===1?h:o===3?f:o===2?u:i}}return{update:g,fill:k}}var d=class extends AudioWorkletProcessor{static parameterDescriptors=[{name:"filterType",defaultValue:1,minValue:0,maxValue:3,automationRate:"k-rate"},{name:"frequency",defaultValue:1e3,minValue:20,maxValue:2e4,automationRate:"k-rate"},{name:"resonance",defaultValue:.5,minValue:0,maxValue:40,automationRate:"k-rate"}];f;r;constructor(){super(),this.f=V(sampleRate),this.r=!0,this.port.onmessage=e=>{switch(e.data.type){case"STOP":this.r=!1;break}}}process(e,r,o){let s=e[0][0],c=r[0][0];return this.f.update(o),s&&c&&this.f.fill(s,c),this.r}};registerProcessor("StateVariableFilterWorkletProcessor",d);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_SVF_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([W],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)}),es=r(9802),ei=r(8336),el=r(3793),eu=r(8672),ec=r(6117);o=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakSet,i=class{static async fetchAvailableNames(){let e=await fetch("https://smpldsnds.github.io/wavedit-online/samples/files.json");if(!e.ok)throw Error("Failed to load wavetable list.");return await e.json()}onLoad(){return(0,es._)(this,n)}getData(){return(0,es._)(this,a)}static decodeWavetable(e){let t=new DataView(e),r=t.getUint16(20,!0),o=t.getUint32(24,!0),a=t.getUint16(22,!0),n=t.getUint16(34,!0),s=t.getUint32(40,!0);if(1!==r)throw Error("Invalid format. Only PCM supported.");if(1!==a)throw Error("Invalid format. Only mono supported.");let i=32===n,l=n/8,u=s/(l*a),c=new Float32Array(u);for(let e=0;e<u;e++)for(let r=0;r<a;r++){let o=44+(e*a+r)*l;c[e]=i?t.getFloat32(o,!0):t.getInt16(o,!0)/32768}return{sampleRate:o,data:c}}constructor(e,t){(0,ec._)(this,s),(0,ei._)(this,o,{writable:!0,value:void 0}),(0,ei._)(this,a,{writable:!0,value:void 0}),(0,ei._)(this,n,{writable:!0,value:void 0}),this.url=e,this.wavetableLength=t,(0,el._)(this,n,(0,eu._)(this,s,ed).call(this))}};var ep=(T='"use strict";(()=>{function F(l){let e=220,r=440,a=.005,o=new Float32Array(0),n=0,i=0,s=0,u=0,c=0,b=2,q=W(l),d=w();function A(t){(t.frequency[0]!==r||t.baseFrequency[0]!==e)&&(e=t.baseFrequency[0],r=t.frequency[0],b=r/e),a=t.morphFrequency[0]}function V(t,m){o=t,n=Math.min(m,t.length),i=Math.floor(t.length/n),s=0,u=(s+1)%i}function x(t,m){if(n===0||i===0){t.fill(0);return}A(m);for(let f=0;f<t.length;f++){let h=q(a),p=g(o,n,s,c);if(u!==s){let k=g(o,n,u,c);t[f]=(1-h)*p+h*k}else t[f]=p;c+=b,c>=n&&(c-=n),c<0&&(c+=n),d(h)&&(s=u,u=(u+1)%i)}}return{agen:x,set:V}}function g(l,e,r,a){let o=Math.floor(a),n=a-o,i=(o+1)%e,s=l[r*e+o],u=l[r*e+i];return s+(u-s)*n}function W(l){let e=1/l,r=0;return a=>{for(r+=a*e;r>=1;)r-=1;for(;r<0;)r+=1;return r}}function w(){let l=0,e=!1;return function(a){let n=Math.abs(a-l)>.5;return l=a,a===0||e===!0?(e=!1,!1):(e=n,n)}}var y=class extends AudioWorkletProcessor{static parameterDescriptors=[{name:"baseFrequency",defaultValue:220,minValue:0,maxValue:2e4,automationRate:"k-rate"},{name:"frequency",defaultValue:440,minValue:0,maxValue:2e4,automationRate:"k-rate"},{name:"morphFrequency",defaultValue:.05,minValue:0,maxValue:10,automationRate:"k-rate"}];u;r;constructor(){super(),this.u=F(sampleRate),this.r=!0,this.port.onmessage=e=>{switch(e.data.type){case"WAVETABLE":this.u.set(e.data.wavetable,e.data.wavetableLength);break;case"DISPOSE":this.r=!1;break}}}process(e,r,a){return this.u.agen(r[0][0],a),this.r}};registerProcessor("WavetableOscillatorWorkletProcessor",y);})();',function(e){if(!e.audioWorklet||!e.audioWorklet.addModule)throw Error("AudioWorklet not supported");let t="__SYNTHLET_WT_OSC_REGISTERED__",r=e.audioWorklet;if(r[t])return Promise.resolve();let o=new Blob([T],{type:"application/javascript"}),a=URL.createObjectURL(o);return r[t]=!0,r.addModule(a)});async function ed(){let e=await fetch(this.url);if(!e.ok)throw Error("Failed to load ".concat(this.url));let t=await e.arrayBuffer(),r=i.decodeWavetable(t);return(0,el._)(this,o,r.sampleRate),(0,el._)(this,a,r.data),{data:(0,es._)(this,a),length:this.wavetableLength,sampleRate:(0,es._)(this,o)}}function ef(e,t,r){let o=[];for(let a of t){e.parameters&&(e[a]=e.parameters.get(a));let t=e[a],n=r[a];"number"==typeof n?t.value=n:n instanceof AudioNode?(t.value=0,n.connect(t),o.push(n)):"function"==typeof n&&o.push(n(t))}return o}function em(e,t){let r=!1;return Object.assign(e,{dispose(){var o,a;if(!r&&(r=!0,e.disconnect(),null===(o=e.port)||void 0===o||o.postMessage({type:"DISPOSE"}),t))for(;t.length;){let e=t.pop();e instanceof AudioNode?"function"==typeof e.dispose?null===(a=e.dispose)||void 0===a||a.call(e):e.disconnect():"function"==typeof e&&e()}}})}function eh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new GainNode(e),o=ef(r,["gain"],t);return em(r,o)}function eg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new BiquadFilterNode(e,{type:t.type}),o=ef(r,["frequency","detune","Q","gain"],t);return em(r,o)}function eb(e){let t=new Set,r=e=>(t.add(e),e),o=e=>{let r=e.dispose,o=Array.from(t).filter(t=>t!==e);return t.clear(),()=>{null==r||r(),o.forEach(e=>e.dispose())}},a=(t,o)=>r(et(e,{input:t,...o}));return{serial:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((e,t)=>(e.connect(t),t))},mix:(e,t)=>(e.forEach(e=>e.connect(t)),t),param:Object.assign(a,{db:e=>a(e,{type:X.DB_TO_GAIN}),lin:(e,t,r)=>a(r,{type:X.LINEAR,min:e,max:t})}),sine:(t,o)=>r(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new OscillatorNode(e,{type:t.type});r.start();let o=ef(r,["frequency","detune"],t);return em(r,o)}(e,{type:"sine",frequency:t})),tri:(t,o)=>r(ea(e,{type:"triangle",frequency:t})),white:()=>r(J(e)),pulse:t=>r(K(e,{trigger:t})),ad:(t,o,a,n)=>r(D(e,{trigger:t,attack:o,decay:a,...n})),amp:t=>r(U(e,{postGain:t})),softClip:(t,o,a)=>r(U(e,{preGain:t,postGain:o,clipType:a})),perc:(t,o,a,n)=>r(eh(e,{gain:D(e,{trigger:t,attack:o,decay:a,...n})})),lpf:(t,o)=>r(eg(e,{type:"lowpass",frequency:t,Q:o})),bpf:(t,o)=>r(eg(e,{type:"bandpass",frequency:t,Q:o})),add:function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];let n=eh(e,{gain:1});return o.forEach(t=>{"number"==typeof t?r(function(e,t){let r=new ConstantSourceNode(e,{offset:t});return r.start(),em(r)}(e,t)).connect(n):t instanceof AudioNode&&t.connect(n)}),r(n)},synth:(e,t)=>Object.assign(e,{dispose:o(e),...function(e){let t={};if(e)for(let r in e)t[r]=e[r].input;return t}(t)}),disposer:o}}function ev(e){let t=eb(e),r=t.param(),o=t.param(.8),a=t.param.db(),n=t.param.lin(30,100,.2),s=t.ad(r,.1,o,{offset:n,gain:50}),i=t.serial(t.mix([t.sine(s),t.pulse(r)],t.perc(r,.01,o)),t.softClip(3,.5,C.Tanh));return t.synth(i,{trigger:r,volume:a,tone:n,decay:o})}function ey(e){let t=eb(e),r=t.param(),o=t.param.db(),a=t.param(),n=t.param(),s=t.mix([t.serial(t.white(),t.perc(r,.01,a)),t.mix([t.sine(100),t.sine(200)],t.perc(r,.01,a))],t.amp(o));return t.synth(s,{trigger:r,volume:o,tone:n,decay:a})}function ek(e){let t=eb(e),r=t.param.db(),o=t.param(),a=t.param(),n=t.param.lin(1200,1800,.6),s=t.serial(t.tri(n),t.ad(o,.01,.05),t.bpf(n),t.amp(r));return t.synth(s,{trigger:o,volume:r,tone:n,decay:a})}function ex(e){return t=>e(eb(t))}function eE(e){return Promise.all([j(e),I(e),L(e),V(e),B(e),q(e),Y(e),$(e),Z(e),ee(e),eo(e),en(e),ep(e)]).then(()=>{})}}}]);